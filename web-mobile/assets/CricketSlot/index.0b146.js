window.__require=function e(t,i,o){function n(l,r){if(!i[l]){if(!t[l]){var s=l.split("/");if(s=s[s.length-1],!t[s]){var c="function"==typeof __require&&__require;if(!r&&c)return c(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+l+"'")}l=s}var u=i[l]={exports:{}};t[l][0].call(u.exports,function(e){return n(t[l][1][e]||e)},u,u.exports,e,t,i,o)}return i[l].exports}for(var a="function"==typeof __require&&__require,l=0;l<o.length;l++)n(o[l]);return n}({CricketSlotContentCom:[function(e,t,i){"use strict";cc._RF.push(t,"3ad26O5qQ5ARY5UXCtEeKIN","CricketSlotContentCom");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(a<3?n(l):a>3?n(t,i,l):n(t,i))||l);return a>3&&l&&Object.defineProperty(t,i,l),l};Object.defineProperty(i,"__esModule",{value:!0});var l=e("../../Script/BaseSlot/RollState"),r=e("../../Script/BaseSlot/SlotBaseContentCom"),s=e("../../Script/BaseSlot/SlotEvent"),c=e("../../Script/BaseSlot/SlotTool"),u=e("../../Script/Core/Analytics/AnalyticsCfg"),d=e("../../Script/Core/Analytics/AnalyticsMgr"),p=e("../../Script/Core/Event/GlobalEvent"),_=e("../../Script/Core/Module/GameData"),h=e("../../Script/Core/Net/SlotNetWorkReq"),f=e("../../Script/Core/Net/SocketMgr"),m=e("../../Script/Core/Tool/CommonFun"),C=e("../../Script/Core/Tool/MathTool"),y=e("../../Script/Core/Tool/ObjPool"),b=e("../../Script/Core/Tool/SoundMgr"),v=e("../../Script/app/data"),g=e("./CricketSlotRowCom"),N=cc._decorator,S=N.ccclass,B=N.property,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.row=null,t.elemtScroll=null,t.elemtScrollend=null,t.awaitClip=null,t._itemRows=[],t._luckyPos=[],t._completeCount=0,t._betValue=0,t._spinBtn=null,t._stopBtn=null,t._autoBtn=null,t._scrollAudioId=-1,t._levelId=0,t._effectScrollAudioId=-1,t._rightsX=[-242.7,-67.8,105,282.8,455],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),p.GlobalEvent.on(s.default.RollState_Complete,this.onRollComplete,this),p.GlobalEvent.on(s.default.UpdateBetValue,this.onUpdateBetValue,this),p.GlobalEvent.on(s.default.Click_Spin,this.onSpin,this),p.GlobalEvent.on(s.default.Click_Stop,this.onStop,this),p.GlobalEvent.on(s.default.UpdateSlotData,this.initRowItem,this),p.GlobalEvent.on(s.default.Click_SpinTest,this.onSpinTest,this),f.default.init(this,["SpinSlotRsp"],["SpinSlotRsp"])},t.prototype.start=function(){this._levelId=_.default.getSlotGameData().level.level_id,this._betValue=Number(_.default.getSlotGameData().prev_base)?Number(_.default.getSlotGameData().prev_base):Number(_.default.getSlotGameData().level.bets[0]),this.initRowItem(),y.default.SetObj(this.row,"GaneshRowItem")},t.prototype.setUI=function(e,t,i){this._spinBtn=e,this._stopBtn=t,this._autoBtn=i},t.prototype.initRowItem=function(){var e=c.default.ConverSlotTables(_.default.getSlotGameData().tables);e=e.elementIndexs,this._itemRows.length=0,this._content.destroyAllChildren();for(var t=0;t<5;t++){var i=cc.instantiate(this.row);i.name=t+"",i.parent=this._content,i.x=172*t-346;var o=i.getComponent(g.default);this._itemRows.push(o),o.g_init(e[t],t,_.default.getSlotGameData().sequence[t],0)}this._rollingStatus=l.default.Status_NoAction},t.prototype.onSpin=function(e){if(this._rollingStatus==l.default.Status_NoAction){this._scrollAudioId=b.default.playEffectByClip(this.elemtScroll),h.SlotNetWorkReq.SpinSlotReq(_.default.getSlotThemeid(),v.snData.game.levelId,e||this._betValue,!!e),this._spinBtn.interactable=!1,this._rollingStatus=l.default.Status_RollAction;for(var t=0;t<5;t++)p.GlobalEvent.emit(s.default.RollState_Start,t);e||(d.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_FOOTBALLSLOTS_SPIN),d.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_SPIN),d.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_BET_PRICE,"","af_price",parseFloat(C.default.divide(this._betValue,1e4))))}},t.prototype.onStop=function(){if(this._rollingStatus==l.default.Status_StartAction){this._rollingStatus=l.default.Status_RollAction,this._stopBtn.interactable=!1;for(var e=0;e<5;e++)0==this._itemRows[e].startStop&&(cc.Tween.stopAllByTarget(this._itemRows[e].node),p.GlobalEvent.emit(s.default.RollState_Stop,e))}},t.prototype.SpinSlotRsp=function(e){var t=this;if(this._completeCount=0,0==e.result.err_code){d.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_START_GAME),d.default.sendH5Event(u.AnalyticsH5Event.Start_game),this._resultInfo=e;for(var i=c.default.ConverSlotTables(e.tables),o=i.elementIndexs,n=i.serverIndexs,a=0;a<5;a++)p.GlobalEvent.emit(s.default.GetServerData,a,o[a],n[a]);if(e.is_free)this.scheduleOnce(function(){for(var e=0;e<5;e++)p.GlobalEvent.emit(s.default.RollState_Stop,e)},.7);else{var r=function(e){cc.tween(t._itemRows[e].node).delay(t._itemRows[e].delayTime).call(function(){var i=0;p.GlobalEvent.emit(s.default.RollState_Stop,e);for(var o=0;o<=e;o++)i+=t._itemRows[o].scatterNum;++e<5&&(i>=2&&(t._waitFreespinRight.active=!0,t._waitFreespinRight.x=t._rightsX[e],t._itemRows[e].delayTime+=1,t._itemRows[e].speed=t._itemRows[e].speed,cc.audioEngine.stopEffect(t._effectScrollAudioId),t._effectScrollAudioId=b.default.playEffectByClip(t.awaitClip)),r(e))}).start()};r(0)}this.scheduleOnce(function(){t._rollingStatus=l.default.Status_StartAction,t._spinBtn.interactable=!1,t._stopBtn.node.active=t._stopBtn.interactable=!0,t.checkfirstStop()},.5)}else m.default.setTip(e.result.err_desc),this.scheduleOnce(function(){for(var e=0;e<5;e++)0==t._itemRows[e].startStop&&(cc.Tween.stopAllByTarget(t._itemRows[e].node),p.GlobalEvent.emit(s.default.RollState_Stop,e));b.default.playEffectByClip(t.elemtScrollend)},.3)},t.prototype.onRollComplete=function(){var e=this;if(this._completeCount++,b.default.playEffectByClip(this.elemtScrollend),5==this._completeCount){this._luckyPos.length=0,this._waitFreespinRight.active=!1,cc.audioEngine.stopEffect(this._effectScrollAudioId);for(var t=[],i=0;i<4;i++)t[i]=[];if(this._resultInfo){if(this._resultInfo.win_line.length>0)for(var o=0;o<this._resultInfo.win_line.length;o++){var n=this._resultInfo.win_line[o].lucky_pos;for(i=0;i<n.length;i++)-1==this._luckyPos.indexOf(n[i])&&this._luckyPos.push(n[i])}var a=this._resultInfo.win_jackpots;for(i=0;i<a.length;i++){var r=a[i].lucky_pos;for(o=0;o<r.length;o++)-1==this._luckyPos.indexOf(r[o])&&this._luckyPos.push(r[o])}var c=this._resultInfo.win_free.lucky_pos;if(c.length>0)for(i=0;i<c.length;i++)-1==this._luckyPos.indexOf(c[i])&&this._luckyPos.push(c[i])}cc.tween(this.node).delay(.2).call(function(){cc.audioEngine.stopEffect(e._scrollAudioId);for(var t=e._luckyPos.length-1;t>=0;t--)p.GlobalEvent.emit(s.default.PlayLuckyElementAnimate,e._luckyPos[t],0)}).delay(.2).call(function(){e._spinBtn.node.active=e._spinBtn.interactable=!0,e._stopBtn.node.active=!1,e._resultInfo&&p.GlobalEvent.emit(s.default.OpenWinAward),e._rollingStatus=l.default.Status_NoAction}).start()}},t.prototype.onUpdateBetValue=function(e){this._betValue=e},t.prototype.onSpinTest=function(e,t){if(this._rollingStatus==l.default.Status_NoAction){this._rollingStatus=l.default.Status_RollAction,this._spinBtn.interactable=!1,h.SlotNetWorkReq.SlotsFakeReq(_.default.getSlotThemeid(),e||this._betValue,t);for(var i=0;i<5;i++)p.GlobalEvent.emit(s.default.RollState_Start,i);for(i=0;i<4;i++)for(var o=0;o<5;o++){var n=5*(i+1)+o;p.GlobalEvent.emit(s.default.RollState_Start,n)}this._scrollAudioId=b.default.playEffectByClip(this.elemtScroll),e||(d.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_FOOTBALLSLOTS_SPIN),d.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_SPIN),d.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_BET_PRICE,"","af_price",parseFloat(C.default.divide(this._betValue,1e4))))}},t.prototype.onDestroy=function(){this._spinBtn=this._stopBtn=this._autoBtn=null,cc.audioEngine.stopEffect(this._scrollAudioId),e.prototype.onDestroy.call(this)},a([B(cc.Prefab)],t.prototype,"row",void 0),a([B(cc.AudioClip)],t.prototype,"elemtScroll",void 0),a([B(cc.AudioClip)],t.prototype,"elemtScrollend",void 0),a([B(cc.AudioClip)],t.prototype,"awaitClip",void 0),a([S],t)}(r.SlotBaseContentCom);i.default=A,cc._RF.pop()},{"../../Script/BaseSlot/RollState":void 0,"../../Script/BaseSlot/SlotBaseContentCom":void 0,"../../Script/BaseSlot/SlotEvent":void 0,"../../Script/BaseSlot/SlotTool":void 0,"../../Script/Core/Analytics/AnalyticsCfg":void 0,"../../Script/Core/Analytics/AnalyticsMgr":void 0,"../../Script/Core/Event/GlobalEvent":void 0,"../../Script/Core/Module/GameData":void 0,"../../Script/Core/Net/SlotNetWorkReq":void 0,"../../Script/Core/Net/SocketMgr":void 0,"../../Script/Core/Tool/CommonFun":void 0,"../../Script/Core/Tool/MathTool":void 0,"../../Script/Core/Tool/ObjPool":void 0,"../../Script/Core/Tool/SoundMgr":void 0,"../../Script/app/data":void 0,"./CricketSlotRowCom":"CricketSlotRowCom"}],CricketSlotItemCom:[function(e,t,i){"use strict";cc._RF.push(t,"e6ed42cmc1MDInjp2CWbSFm","CricketSlotItemCom");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(a<3?n(l):a>3?n(t,i,l):n(t,i))||l);return a>3&&l&&Object.defineProperty(t,i,l),l};Object.defineProperty(i,"__esModule",{value:!0});var l=e("../../Script/Core/Tool/GetComByName"),r=cc._decorator,s=r.ccclass,c=r.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.elementNode=[],t.rightAnimate=null,t._currId=-1,t._itemNodes=[],t._elementAnimate=[],t._elementDragonBones=[],t}return n(t,e),t.prototype.init=function(){for(var e=0;e<this.elementNode.length;e++)this._itemNodes[e]=this.elementNode[e].getChildByName("item"),this._elementAnimate[e]=l.GetComByName(this.elementNode[e],"animateNode",cc.Animation),this._elementAnimate[e]||(this._elementDragonBones[e]=l.GetComByName(this.elementNode[e],"animateNode",dragonBones.ArmatureDisplay))},t.prototype.reset=function(){this.rightAnimate.node.active=!1,-1!=this._currId&&(this._elementAnimate[this._currId]?(this._elementAnimate[this._currId].setCurrentTime(0),this._elementAnimate[this._currId].stop(),this._elementAnimate[this._currId].node.active=!1):this._elementDragonBones[this._currId].node.active=!1,this._itemNodes[this._currId].active=!0)},t.prototype.setCurrNode=function(e){-1!=this._currId&&(this._itemNodes[this._currId].parent.active=!1),this._itemNodes[e].parent.active=!0,this._itemNodes[e].active=!0,this._elementAnimate[e]&&this._elementAnimate[e].stop(),this._currId=e},t.prototype.playAnimate=function(){-1!=this._currId&&(this._itemNodes[this._currId].active=!1,this._elementAnimate[this._currId]?(this._elementAnimate[this._currId].node.active=!0,this._elementAnimate[this._currId].play()):(this._elementDragonBones[this._currId].node.active=!0,this._elementDragonBones[this._currId].playAnimation("newAnimation",0))),this.rightAnimate.node.active=!0,this.rightAnimate.play()},a([c(cc.Node)],t.prototype,"elementNode",void 0),a([c(cc.Animation)],t.prototype,"rightAnimate",void 0),a([s],t)}(cc.Component);i.default=u,cc._RF.pop()},{"../../Script/Core/Tool/GetComByName":void 0}],CricketSlotRowCom:[function(e,t,i){"use strict";cc._RF.push(t,"010e7/fboFLJLpdJ24iWfnH","CricketSlotRowCom");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(a<3?n(l):a>3?n(t,i,l):n(t,i))||l);return a>3&&l&&Object.defineProperty(t,i,l),l};Object.defineProperty(i,"__esModule",{value:!0});var l=e("../../Script/BaseSlot/SlotRowBase"),r=e("../../Script/Core/Tool/CommonTool"),s=e("../../Script/Core/Tool/SoundMgr"),c=e("./CricketSlotItemCom"),u=cc._decorator,d=u.ccclass,p=u.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._winAnimateNode=null,t._screenId=0,t.rightClip=null,t.rightSoundId=-1,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._spaceY=142,this._startY=-295,this._speed=570,this._scatterId=11},t.prototype.g_init=function(e,t,i,o){e.push(1),e.unshift(Math.floor(Math.random()*this._elementCount)+1),this.node.removeAllChildren(),this.node.y=0;for(var n=[],a=[],l=0;l<this._itemCount;l++){var s=void 0;this._itemList[l]?(s=this._itemList[l],n.unshift(s),a.push(String(l))):(s=cc.instantiate(this.item),this._itemList.unshift(s),this._itemQueueTag.push(String(l))),s.name=l+"",s.parent=this.node,s.y=this._startY+this._spaceY*l,s.itemCom=s.getComponent(c.default),s.itemCom.init(),s.itemCom.reset(),s.itemCom.setCurrNode(e[l]-1)}this._itemList=0!=n.length?n.slice():this._itemList,this._itemQueueTag=0!=a.length?a.slice():this._itemQueueTag;var u=this._itemList[this._itemList.length-1];this._endReelY=r.default.ConverNodePos(u,this.node.parent).y+18,this._rowId=t,this._screenId=o;var d=this._itemList.length;this._itemList[d-1].y-=200,this._orgDelayTime=.25,this._orgDelayTime=t%5==0?this._orgDelayTime+.4:this._orgDelayTime,this._delayTime=this._orgDelayTime,this.scatterNum=0,this.resetdata()},t.prototype.updateItemPosition=function(){var e=this._itemQueueTag[0];if(e!==this._stopTag){var t=this.node.getChildByName(String(e));if(t){var i=null;if(r.default.ConverNodePos(t,this.node.parent).y<this._endReelY){this._itemQueueTag.shift(),i=t;var o=this._itemQueueTag[this._itemQueueTag.length-1],n=this.node.getChildByName(String(o));t.y=n.y+this._spaceY,t.zIndex=n.zIndex-1<0?0:n.zIndex-1,this._itemQueueTag.push(String(e))}if(i){var a=this._elemSequen?this.getElemtId():Math.floor(Math.random()*this._elementCount)+1;this.startStop&&(a=this._resultQueue.shift()||a,i.serverpos=this._serverPos.shift(),this._canStartStop||0!=this._resultQueue.length||(this._canStartStop=!0,this._stopTag=parseInt(i.name))),a-=1,i.itemCom.setCurrNode(a)}}this.checkStartStopAction()}},t.prototype.resetdata=function(){this.scatterNum=0,e.prototype.resetdata.call(this);for(var t=this._itemList.length-1;t>=0;t--)this._itemList[t].itemCom.reset();this.rightSoundId=-1},t.prototype.onPlayLuckElement=function(e,t){if(void 0===t&&(t=0),t==this._screenId)for(var i=this._itemList.length-1;i>=0;i--)this._itemList[i].serverpos==e&&this._itemList[i].itemCom.playAnimate(),-1===this.rightSoundId&&(this.rightSoundId=s.default.playEffectByClip(this.rightClip))},t.prototype.getElemtId=function(){var e=this._elemSequen.shift();return this._elemSequen.push(e),e},a([p(cc.AudioClip)],t.prototype,"rightClip",void 0),a([d],t)}(l.default);i.default=_,cc._RF.pop()},{"../../Script/BaseSlot/SlotRowBase":void 0,"../../Script/Core/Tool/CommonTool":void 0,"../../Script/Core/Tool/SoundMgr":void 0,"./CricketSlotItemCom":"CricketSlotItemCom"}],CricketSlotScene:[function(e,t,i){"use strict";cc._RF.push(t,"69a63tFsURBgqUMs3I+1eL3","CricketSlotScene");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var r=e.length-1;r>=0;r--)(n=e[r])&&(l=(a<3?n(l):a>3?n(t,i,l):n(t,i))||l);return a>3&&l&&Object.defineProperty(t,i,l),l};Object.defineProperty(i,"__esModule",{value:!0});var l=e("../../Script/BaseSlot/SlotBaseScene"),r=e("../../Script/BaseSlot/SlotGameCfg"),s=e("../../Script/Core/Analytics/AnalyticsCfg"),c=e("../../Script/Core/Analytics/AnalyticsMgr"),u=e("../../Script/Core/Common/NotifyManage"),d=e("../../Script/Core/Common/TipsPopup"),p=e("../../Script/Core/Config/LanguageCfg"),_=e("../../Script/Core/Module/GameData"),h=e("../../Script/Core/Net/HttpMgr"),f=e("../../Script/Core/Net/SlotNetWorkReq"),m=e("../../Script/Core/Net/SocketMgr"),C=e("../../Script/Core/Popup/PopupCfg"),y=e("../../Script/Core/Popup/PopupMgr"),b=e("../../Script/Core/Scene/SceneMgr"),v=e("../../Script/Core/Tool/CommonFun"),g=e("../../Script/Core/Tool/CommonTool"),N=e("../../Script/Core/Tool/GetComByName"),S=e("../../Script/Core/Tool/MathTool"),B=e("../../Script/Core/Tool/ObjPool"),A=e("../../Script/Core/Tool/SoundMgr"),w=e("../../Script/app/data"),k=cc._decorator,P=k.ccclass,L=k.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collectClip=null,t.luckyballClip=null,t.winClip=null,t.bigWinNodeClip=null,t.megaWinNodeClip=null,t.miniWinNodeClip=null,t.minorWinNodeClip=null,t.majorWinNodeClip=null,t.grandWinNodeClip=null,t.scatterClip=null,t.normalwinClip=null,t.freeSpinBmg=null,t.endfreeSpin=null,t.leijiClip=null,t.betAddClip=null,t.betSubClip=null,t.betMaxClip=null,t.openPool=null,t.freespinFinishClip=null,t.progressBarClip=null,t.cupClip=null,t.bigwin_sound_wClip=null,t.megawin_sound_mClip=null,t.winPrefab=null,t.bigWinPrefab=null,t.megaWinPrefab=null,t.grandWinPrefab=null,t.majorWinPrefab=null,t.minorWinPrefab=null,t.miniWinPrefab=null,t.freeSpinPrefab=null,t.freeOverPrefab=null,t._jackData=null,t._freeSpinJackData=[],t._winType=0,t._winBigGold=0,t._lastBetNum=0,t._effectAudioId=-1,t._isFree=!1,t._itemPos=[cc.v2(-315,131),cc.v2(-155.5,131),cc.v2(4,131),cc.v2(163.5,131),cc.v2(323,131),cc.v2(-315,-11),cc.v2(-155.5,-11),cc.v2(4,-11),cc.v2(163.5,-11),cc.v2(323,-11),cc.v2(-315,-153),cc.v2(-155.5,-153),cc.v2(4,-153),cc.v2(163.5,-153),cc.v2(323,-153)],t}return n(t,e),t.prototype.initEvent=function(){e.prototype.initEvent.call(this),m.default.init(this,["SpinSlotRsp","LeaveSlotThemeRsp","RummyGetPlayerInfoRsp","RefreshSlotJackPotRsp"],["SpinSlotRsp"])},t.prototype.initUiData=function(){var t=this;e.prototype.initUiData.call(this),_.default.getNotifySwitch()&&u.default.show(this._topNode,cc.v2(40,5)),h.default.sendPostManage({page:"Football Slot",action:"entry"}),this._jackData=_.default.getSlotGameData().jack_pot,B.default.SetObj(this._goldItems,"goldItem");var i=function(){if(_.default.getSlotGameData().free_count>0){t._freeCount=_.default.getSlotGameData().free_count,t._freeBaseBet=Number(_.default.getSlotGameData().free_base);var e={tipsInfo:p.default.Formate("You have X rough free",t._freeCount),yesCallBack:function(){t.scheduleOnce(function(){t.startFreeSpin(),t._jackPotNode2.active=!0,t._jackPotNode1.active=!1,t.resetFreeJackpot(),t.setJindu(Number(_.default.getSlotGameData().acc_elem[0]))},.3)},isNo:!1,bHelper:!0};d.TipsPopupHelper.show(e);for(var i=0;i<t._bets.length;i++)if(Number(t._bets[i])==t._freeBaseBet){t._betIndex=i;break}}};_.default.getSlotGameData().enter_luckyball?y.default.show(C.default.POPUP_TARGE.LuckyBall,{data:{win:0,all:this._myGold+"",bet:this._bets[this._betIndex],closeF:function(e){""!=e&&(t._goldLabel.label.string=e,t._myGold=e),A.default.playMusicByClip(t.bmgClip),i()}}}):i(),this._slotContentNode.getComponent("CricketSlotContentCom").setUI(this._spinBtn.button,this._stopBtn.button,this._autoBtn.button),this.updateJackpot(),f.SlotNetWorkReq.RefreshSlotJackPotReq(_.default.getSlotThemeid(),w.snData.game.levelId,this._bets[this._betIndex]),this._goldLabel.label.schedule(function(){f.SlotNetWorkReq.RefreshSlotJackPotReq(_.default.getSlotThemeid(),w.snData.game.levelId,t._bets[t._betIndex])},this._jackpotSchedule,cc.macro.REPEAT_FOREVER)},t.prototype.onUpdatUI=function(){e.prototype.onUpdatUI.call(this),this._winNumNode.active=this._freeNode.active=this._freeSpinMask.active=this._freeBtn.active=this._stopBtn.active=this._autoSgin.active=!1,this._goodluck_img.active=this._spinBtn.active=!0,this._spinBtn.button.interactable=this._autoBtn.button.interactable=!0},t.prototype.onAutoCallBack=function(t){this._autoSgin.active=!0,e.prototype.onAutoCallBack.call(this,t)},t.prototype.onCancelAutoCallBack=function(e){e&&A.default.playEffectByClip(this.btnTouchClip),this._autoNum=0,this._spinBtn.active=this._autoBtn.button.interactable=!0,this._autoSgin.active=!1,this._autonumlabel.label.string="",this._maxbetBtn.button.interactable=this._jiaBtn.button.interactable=this._betIndex!=this._bets.length-1,this._jianBtn.button.interactable=0!=this._betIndex,this.checkMinBetIndex()},t.prototype.onOpearBetCallBack=function(t){e.prototype.onOpearBetCallBack.call(this,t),this.updateJackpot(),2==t.index?A.default.playEffectByClip(this.betMaxClip):1==t.index?A.default.playEffectByClip(this.betAddClip):A.default.playEffectByClip(this.betSubClip)},t.prototype.RefreshSlotJackPotRsp=function(e){this._jackData=e.jack_pot,this.updateJackpot()},t.prototype.updateJackpot=function(){var e=this,t=this.getJackPotData(1);t&&g.default.NumAnimate(this._jockPot1.label,.2,1e4*Number(this._jockPot1.label.string),Number(t.pool_coin),1,1,function(){e._jockPot1.label.string=S.default.divide(Number(t.pool_coin),1e4),e._sJackPot1.label.string=S.default.divide(Number(t.pool_coin),1e4)});var i=this.getJackPotData(2);i&&g.default.NumAnimate(this._jockPot2.label,.2,1e4*Number(this._jockPot2.label.string),Number(i.pool_coin),1,1,function(){e._jockPot2.label.string=S.default.divide(Number(i.pool_coin),1e4),e._sJackPot2.label.string=S.default.divide(Number(i.pool_coin),1e4)});var o=this.getJackPotData(3);o&&g.default.NumAnimate(this._jockPot3.label,.2,1e4*Number(this._jockPot3.label.string),Number(o.pool_coin),1,1,function(){e._jockPot3.label.string=S.default.divide(Number(o.pool_coin),1e4),e._sJackPot3.label.string=S.default.divide(Number(o.pool_coin),1e4)}),o&&Number(o.min_bet)<=Number(this._bets[this._betIndex])?(this._major_img1.active&&A.default.playEffectByClip(this.openPool),this._major_img1.active=!1,this._jockPot3.opacity=255,this._free_major1.active=!1,this._sJackPot3.opacity=255):(this._major_img1.active=!0,this._jockPot3.opacity=100,this._free_major1.active=!0,this._sJackPot3.opacity=100);var n=this.getJackPotData(4);n&&g.default.NumAnimate(this._jockPot4.label,.2,1e4*Number(this._jockPot4.label.string),Number(n.pool_coin),1,1,function(){e._jockPot4.label.string=S.default.divide(Number(n.pool_coin),1e4),e._sJackPot4.label.string=S.default.divide(Number(n.pool_coin),1e4)}),n&&Number(n.min_bet)<=Number(this._bets[this._betIndex])?(this._grand_img1.active&&A.default.playEffectByClip(this.openPool),this._grand_img1.active=!1,this._jockPot4.opacity=255,this._free_grand1.active=!1,this._sJackPot4.opacity=255):(this._grand_img1.active=!0,this._jockPot4.opacity=100,this._free_grand1.active=!0,this._sJackPot4.opacity=100),this._freeSpinJackData.length=0,this._freeSpinJackData.push(o.jack_count),this._freeSpinJackData.push(n.jack_count),this._free_major.setPosition(100+this._freeSpinJackData[0]/this._freeSpinJackData[1]*800,60)},t.prototype.resetFreeJackpot=function(){this._jackCountLabel.label.string="0",this._jinduNode.width=this._pointEffect.x=0},t.prototype.updateFreeSpinJackpot=function(){for(var e=this,t=0;t<this._resultData.add_acc.length;t++)for(var i=this._resultData.add_acc[t].lucky_pos,o=0;o<i.length;o++){var n=g.default.ConverPos(this._itemPos[i[o]],this._content,this._jackPotNode2),a=B.default.GetObj("goldItem");a.active=!0,a.scale=1,a.parent=this._jackPotNode2,a.position=n,A.default.playEffectByClip(this.leijiClip),cc.tween(a).to(.7,{x:107.243,y:37,scale:.5}).call(function(t){cc.Tween.stopAllByTarget(e._jianbeiNode),cc.tween(e._jianbeiNode).to(.08,{scale:1.13}).to(.08,{scale:1}).start(),t.removeFromParent()}).start()}this.scheduleOnce(function(){var t=Number(e._resultData.acc_elem[0]||0);e.setJindu(t),e.scheduleOnce(function(){e.resultFinish(!0)},.25)},.7)},t.prototype.setJindu=function(e){var t=this,i=e;this._jackCountLabel.label.string=i+"",i>this._freeSpinJackData[1]&&(i=this._freeSpinJackData[1]);var o=848*i/this._freeSpinJackData[1];A.default.playEffectByClip(this.cupClip),A.default.playEffectByClip(this.progressBarClip),cc.tween(this._jinduNode).to(.2,{width:o}).call(function(){t._jinduNode.width>=t._jinduNode.children[0].width&&A.default.playEffectByClip(t.freespinFinishClip)}).start(),cc.tween(this._pointEffect).to(.2,{x:o}).start()},t.prototype.SpinSlotRsp=function(e){if(0==e.result.err_code){this.round++;var t;t=e.is_free?Number(e.win_coins):Number(e.win_coins)-Number(e.bet_coins),this._lastBetNum=Number(e.bet_coins),c.default.sendAFEvent(s.AnalyticsAFCfg.getEventPlayGame(),{round:this.round,goldChange:S.default.divide(t,1e4)}),this._serverGold=e.now_coin,this._resultData=e,this._winGold=e.win_coins,this._isLuckBall=e.show_luckyball,this._isFreeSpin=!1,e.is_free?(this._freeCount>0&&this._freeCount--,e.win_free.free_count?(this._isFreeSpin=!0,this._freeCurrCount=Number(e.win_free.free_count)-this._freeCount,this._freeCount=Number(e.win_free.free_count)):this._freenumlabel.label.string=this._freeCount+"",this._freeTotalWinNum+=Number(e.win_coins)):(this._freeCount=this._freeCurrCount=Number(e.win_free.free_count),this._freeBaseBet=Number(e.win_free.free_base),this._myGold=S.default.sub(this._myGold,S.default.divide(Number(e.bet_coins),1e4)),this._isFreeSpin=!!e.win_free.free_count,this._freeTotalWinNum=0,this._autoNum>0&&(this._autoNum--,this._autonumlabel.label.string=this._autoNum+""),this._winNumLabel.label.string="0"),this._goldLabel.label.string=this._myGold,this._winNumNode.active=this._freeNode.active,this._goodluck_img.active=!this._freeNode.active,this._jackData=e.jack_pot,this.updateJackpot()}else v.default.setTip(e.result.err_desc)},t.prototype.LeaveSlotThemeRsp=function(){b.default.runScene("HallScene")},t.prototype.onHideAutoNode=function(){this._autoNode.active=!1},t.prototype.onOpenWinAward=function(){e.prototype.onOpenWinAward.call(this),this._jackPotNode2.active&&this._resultData.add_acc.length>0?this.updateFreeSpinJackpot():this.resultFinish()},t.prototype.resultFinish=function(e){var t=this;switch(void 0===e&&(e=!1),this._isFree=e,this._myGold=this._serverGold,this._winType=this._resultData.win_type,this._resultData.win_acc.length>0&&this._resultData.win_acc[0].pool_id<5&&(this._winType=3+this._resultData.win_acc[0].pool_id,this._winBigGold=this._resultData.win_acc[0].win_coin),this._resultData.win_jackpots.length>0&&(this._winType=3+this._resultData.win_jackpots[0].pool_id,this._winBigGold=this._resultData.win_jackpots[0].win_coin),this._winBigGold=Math.floor(this._winBigGold*(100-_.default.getSlotGameData().tax_rate))/100,this._winType){case 1:return void this.createWinAnimate();case 2:return void this.createAnimateNode("bigWinNode",this.bigWinPrefab);case 3:return void this.createAnimateNode("megaWinNode",this.megaWinPrefab);case 4:return void this.createAnimateNode("miniWinNode",this.miniWinPrefab);case 5:return void this.createAnimateNode("minorWinNode",this.minorWinPrefab);case 6:return void this.createAnimateNode("majorWinNode",this.majorWinPrefab);case 7:return void this.createAnimateNode("grandWinNode",this.grandWinPrefab)}g.default.NumAnimate(this._goldLabel.label,.5,1e4*Number(this._goldLabel.label.string),1e4*Number(this._myGold),1,1,function(){t._goldLabel.label.string=t._myGold}),this.judgeFinish()},t.prototype.judgeFinish=function(){var e=this;if(this._isFreeSpin)return this._isPlayAnimate=!0,void this.scheduleOnce(function(){e.playFreeSpinAnimate()},.8);if(this._freeCount)this.startFreeSpin(.1);else{if(this.requestBrokeData(Number(this._myGold),this._lastBetNum),this._freeBaseBet=void 0,this._freeSpinMask.active)return this._isPlayAnimate=!0,void this.scheduleOnce(function(){e.playFreeOverAnimate()},1);this._freeSpinMask.active=this._freeBtn.active=this._freeNode.active=!1,this.startAutoSpin(.1)}},t.prototype.winAnimateClose=function(e){var t=this;this.__winNodeAnimateNode.getChildByName("bg").getComponent(cc.BlockInputEvents)||this.__winNodeAnimateNode.getChildByName("bg").addComponent(cc.BlockInputEvents),this.unscheduleAllCallbacks();var i=this.__winNodeAnimateNode.getChildByName("node");i.__show=!0,v.default.closeDialogAnimate(i,function(){i.scale=1,t.__winNodeAnimate.setCurrentTime(0),t.__winNodeAnimate.stop(),t._isPlayAnimate=t.__winNodeAnimateNode.active=!1,1!=e&&t.judgeFinish()})},t.prototype.createWinAnimate=function(){var e=this;this._isPlayAnimate=!0,this.__winNodeAnimateNode=this.__winNodeAnimateNode||cc.instantiate(this.winPrefab),null==this.__winNodeAnimateNode.parent&&(this.__winNodeAnimateNode.parent=this._ContentUpLayer),this.__winLabel=this.__winLabel||N.GetComByName(this.__winNodeAnimateNode,"numLabel",cc.Label),this.__winLabel.string="",this.__winNodeAnimate=this.__winNodeAnimate||N.GetComByName(this.__winNodeAnimateNode,"win",cc.Animation),r.SlotGameCfg.isFirstStop||(this.__winNodeAnimate.play(),this.__winNodeAnimateNode.active=!0),this._effectAudioId=A.default.playEffectByClip(this.normalwinClip),null==this._winNodeBall&&(this._winNodeBall=N.GetNodeByName(this.__winNodeAnimateNode,"luckyBallBtn"),v.default.addClick(this._winNodeBall,this.openLuckyBall,this,this.winAnimateClose.bind(this,!0)),v.default.addClick(this.__winNodeAnimateNode,this.winAnimateClose.bind(this,null),this));var t=this._isLuckBall&&!this._isFree;if(this._winNodeBall.active=t,t){var i=2;this._winNodeBall.getChildByName("timeLab").getComponent(cc.Label).string=i;var o=function(){i--,e._winNodeBall.getChildByName("timeLab").getComponent(cc.Label).string=i,i<=0&&e.unschedule(o)};this.schedule(o,1),this.__winNodeAnimateNode.getChildByName("bg").getComponent(cc.BlockInputEvents)||this.__winNodeAnimateNode.getChildByName("bg").addComponent(cc.BlockInputEvents),this.scheduleOnce(function(){e.__winNodeAnimateNode.getChildByName("bg").getComponent(cc.BlockInputEvents)&&e.__winNodeAnimateNode.getChildByName("bg").removeComponent(cc.BlockInputEvents)},1.5)}else this.__winNodeAnimateNode.getChildByName("bg").getComponent(cc.BlockInputEvents)||this.__winNodeAnimateNode.getChildByName("bg").addComponent(cc.BlockInputEvents);this.scheduleOnce(function(){e._goodluck_img.active=!1,e._winNumNode.active=!0,e._isPlayAward=!0;var i=1e4*Number(e._winNumLabel.label.string),o=e._winGold;if(g.default.NumAnimate(e._goldLabel.label,.5,1e4*Number(e._goldLabel.label.string),1e4*Number(e._myGold),1,1,function(){e._goldLabel.label.string=e._myGold,e.requestBrokeData(Number(e._myGold),e._lastBetNum),v.default.showMoneyChangeWithDrawPopup(),e.requestBigRewardGiftData()}),g.default.NumAnimate(e._winNumLabel.label,.5,i,Number(o),1,1.3,function(){e._winNumLabel.label.string=S.default.divide(o,1e4),e._isPlayAward=!1}),e.scheduleOnce(e.winAnimateClose,t?2:1),g.default.NumAnimate(e.__winLabel,.5,0,Number(e._winGold),1,1),e._freeNode.active){var n=e._freeNode.active?1e4*Number(e._winNumLabel.label.string):0,a=e._freeNode.active?e._freeTotalWinNum:e._winGold;A.default.playEffectByClip(e.normalwinClip),g.default.NumAnimate(e._winNumLabel.label,.6,n,Number(a),1,1.3,function(){e._winNumLabel.label.string=S.default.divide(a,1e4),g.default.NumAnimate(e._goldLabel.label,.5,1e4*Number(e._goldLabel.label.string),1e4*Number(e._myGold),1,1,function(){e._goldLabel.label.string=e._myGold}),e._isPlayAward=!1})}},.3)},t.prototype.openLuckyBall=function(e){var t=this;A.default.playEffectByClip(this.luckyballClip),e&&A.default.playerEffect("clickbottom");var i;this._autonumlabel.label.string,this._autoNumLeft=this._autoNum,this._autoNum=0,this.startAutoSpin(),i=this._isFree?this._freeTotalWinNum:this._winGold,y.default.show(C.default.POPUP_TARGE.LuckyBall,{data:{win:i,all:this._goldLabel.label.string,bet:this._bets[this._betIndex],closeF:function(e){""!=e&&(t._goldLabel.label.string=e,t._myGold=e),A.default.playMusicByClip(t.bmgClip),t._autoNum=t._autoNumLeft,t.judgeFinish()}}}),null==e||e.index()},t.prototype.createAnimateNode=function(e,t){var i=this;this._isPlayAnimate=!0,this["_"+e]=this["_"+e]||cc.instantiate(t),null==this["_"+e].parent&&(this["_"+e].parent=this._ContentUpLayer),this["_"+e+"win"]=this["_"+e+"win"]||N.GetNodeByName(this["_"+e],"win"),this["_"+e+"particle"]=this["_"+e+"particle"]||N.GetComByName(this["_"+e],"particle",cc.ParticleSystem),this["_"+e+"winConten"]=this["_"+e+"winConten"]||N.GetNodeByName(this["_"+e],"winConten"),this["_"+e+"WinLabel"]=this["_"+e+"WinLabel"]||N.GetComByName(this["_"+e+"winConten"],"WinLabel",cc.Label),null==this["_"+e+"WinCloseBtn"]&&(this["_"+e+"WinCloseBtn"]=this["_"+e+"winConten"].getChildByName("WinCloseBtn"),v.default.addClick(this["_"+e+"WinCloseBtn"],this.onCloseWin.bind(this,null),this)),this["_"+e+"WinTimeLabel"]=this["_"+e+"WinTimeLabel"]||this["_"+e+"WinCloseBtn"].getChildByName("WinTimeLabel").getComponent(cc.Label),this._currWinNodeName=e,"megaWinNode"!=e&&"bigWinNode"!=e||null==this["_"+e+"LuckyBall"]&&(this["_"+e+"LuckyBall"]=N.GetNodeByName(this["_"+e],"luckyBall"),v.default.addClick(this["_"+e+"LuckyBall"].getChildByName("luckbtn"),this.openLuckyBall,this,this.onCloseWin.bind(this,!0)),v.default.addClick(this["_"+e+"LuckyBall"].getChildByName("closebtn"),this.onCloseWin.bind(this,null),this)),this.scheduleOnce(function(){switch(i.playSpecialAnimate(e,i["_"+e],i["_"+e+"win"],i["_"+e+"winConten"],i["_"+e+"WinLabel"],i["_"+e+"WinCloseBtn"],i["_"+e+"WinTimeLabel"],i["_"+e+"LuckyBall"],!0),e){case"bigWinNode":i._effectAudioId=A.default.playEffectByClip(i.bigWinNodeClip),A.default.playEffectByClip(i.bigwin_sound_wClip);break;case"megaWinNode":i._effectAudioId=A.default.playEffectByClip(i.megaWinNodeClip),A.default.playEffectByClip(i.megawin_sound_mClip);break;case"miniWinNode":i._effectAudioId=A.default.playEffectByClip(i.miniWinNodeClip);break;case"minorWinNode":i._effectAudioId=A.default.playEffectByClip(i.minorWinNodeClip);break;case"majorWinNode":i._effectAudioId=A.default.playEffectByClip(i.majorWinNodeClip);break;case"grandWinNode":i._effectAudioId=A.default.playEffectByClip(i.grandWinNodeClip);break;default:i._effectAudioId=A.default.playEffectByClip(i[e+"Clip"])}},.8)},t.prototype.startAutoSpin=function(e){var t=this;this._autoNum>0?(this._maxbetBtn.button.interactable=this._jianBtn.button.interactable=this._jiaBtn.button.interactable=!1,e=e||.1,this.scheduleOnce(function(){t.onSpinCallBack()},e)):this.onCancelAutoCallBack()},t.prototype.startFreeSpin=function(t){var i=this;e.prototype.startFreeSpin.call(this,t),this._freeCount>0?(this._freeNode.active||(cc.Tween.stopAllByTarget(this._winNumLabel.label.node),this._winNumLabel.label.string="0.00"),this._freeSpinMask.active=this._freeBtn.active=this._freeNode.active=!0,this._maxbetBtn.button.interactable=this._jianBtn.button.interactable=this._jiaBtn.button.interactable=this._autoBtn.button.interactable=!1,t=t||.1,this.scheduleOnce(function(){i.onSpinCallBack()},t)):this.onCancelAutoCallBack()},t.prototype.playSpecialAnimate=function(e,t,i,o,n,a,l,r,s){var c,u=this;void 0===s&&(s=!1),t.active=i.active=!0,n.string="","grandWinNode"===e?i.getComponent(dragonBones.ArmatureDisplay).playAnimation("Grandwin",1):"majorWinNode"===e?i.getComponent(dragonBones.ArmatureDisplay).playAnimation("majorwin",1):"minorWinNode"===e?i.getComponent(dragonBones.ArmatureDisplay).playAnimation("miorwin",1):"miniWinNode"===e?i.getComponent(dragonBones.ArmatureDisplay).playAnimation("miniwin",1):i.getComponent(dragonBones.ArmatureDisplay).playAnimation("newAnimation",1),null===(c=this["_"+this._currWinNodeName+"particle"])||void 0===c||c.resetSystem(),r&&(r.active=!1);var d=this._winType>3?this._winBigGold:this._winGold;this.scheduleOnce(function(){o.active=!0,g.default.NumAnimate(n,.4,0,d,1,1.2,function(){if(n.string=S.default.divide(d,1e4),g.default.NumAnimate(u._goldLabel.label,.5,1e4*Number(u._goldLabel.label.string),1e4*Number(u._myGold),1,1,function(){u._goldLabel.label.string=u._myGold,u.requestBrokeData(Number(u._myGold),u._lastBetNum),v.default.showMoneyChangeWithDrawPopup(),u.requestBigRewardGiftData()}),u._isPlayAward=!1,a.active=!0,r&&(r.active=!1),("megaWinNode"==e||"bigWinNode"==e)&&!u._isFree)if(u._isLuckBall)if(r.active=!0,a.active=!1,_.default.getRequestBigRewardStatue())r.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string="";else{r.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string=2;var t=2,i=function(){t--,r.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string=t,t<=0&&u.unschedule(i)};u.schedule(i,1)}else r.active=!1,a.active=!0;u._goodluck_img.active=!1,u._winNumNode.active=!0;var o=u._winType>3?1e4*Number(u._winNumLabel.label.string)+Number(u._winBigGold):u._freeTotalWinNum,s=u._freeNode.active?1e4*Number(u._winNumLabel.label.string):0,c=u._freeNode.active?o:d;if(g.default.NumAnimate(u._winNumLabel.label,.3,s,Number(c),1,1,function(){u._winNumLabel.label.string=S.default.divide(c,1e4)}),u._countdown){var p=u._countdown;l.string=p+"",u.schedule(function(){p>0?(p--,l.string=p+""):u.onCloseWin(null)},1,u._countdown)}})},.3)},t.prototype.playFreeSpinAnimate=function(){var e=this;A.default.playMusicByClip(this.freeSpinBmg),this._effectAudioId=A.default.playEffectByClip(this.scatterClip),this._freeSpinNode=this._freeSpinNode||cc.instantiate(this.freeSpinPrefab),this._freeSpinAni=this._freeSpinAni||N.GetNodeByName(this._freeSpinNode,"freeSpinAni"),this._freeConten=this._freeConten||N.GetNodeByName(this._freeSpinNode,"freeConten"),this._getFreeCountLabel=this._getFreeCountLabel||N.GetComByName(this._freeConten,"getFreeCountLabel",cc.Label),this._freeSpinTimeLabel=this._freeSpinTimeLabel||N.GetComByName(this._freeSpinNode,"freeSpinTimeLabel",cc.Label),null==this._freeSpinNode.parent&&(this._freeSpinNode.parent=this._ContentUpLayer,v.default.addClick(N.GetNodeByName(this._freeSpinNode,"freeStartBtn"),this.onCloseFreeAnimate,this)),this._freeSpinNode.active=!0,this._getFreeCountLabel.string=this._freeCurrCount+"",this._freenumlabel.label.string=this._freeCount+"",this._freeSpinAni.getComponent(dragonBones.ArmatureDisplay).playAnimation("freespin",1),this.scheduleOnce(function(){e._freeConten.active=!0;var t=e._countdown;e._freeSpinTimeLabel.string=t+"",e.schedule(function(){t>0?(t--,e._freeSpinTimeLabel.string=t+""):e.onCloseFreeAnimate()},1,e._countdown)},.5)},t.prototype.playFreeOverAnimate=function(){var e=this;this._effectAudioId=A.default.playEffectByClip(this.endfreeSpin),this._freeOverNode=this._freeOverNode||cc.instantiate(this.freeOverPrefab),this._freeoverAni=this._freeoverAni||N.GetNodeByName(this._freeOverNode,"freeoverAni"),this._freeoverConten=this._freeoverConten||N.GetNodeByName(this._freeOverNode,"freeoverConten"),this._freewinLabel=this._freewinLabel||N.GetComByName(this._freeOverNode,"freewinLabel",cc.Label),this._freeCloseTimeLabel=this._freeCloseTimeLabel||N.GetComByName(this._freeOverNode,"freeCloseTimeLabel",cc.Label),null==this._freeOverNode.parent&&(this._freeOverNode.parent=this._ContentUpLayer,v.default.addClick(N.GetNodeByName(this._freeOverNode,"freeCloseBtn"),this.onCloseFreeOverAnimate,this)),this._freeOverNode.active=!0,this._freewinLabel.string=S.default.divide(Number(this._freeTotalWinNum),1e4),this._freeoverAni.getComponent(dragonBones.ArmatureDisplay).playAnimation("totalwin",1),null==this._freeCloseLucky&&(this._freeCloseLucky=N.GetNodeByName(this._freeOverNode,"luckyBall"),v.default.addClick(this._freeCloseLucky.getChildByName("luckbtn"),this.openLuckyBall,this,this.onCloseFreeOverAnimate.bind(this)),v.default.addClick(this._freeCloseLucky.getChildByName("closebtn"),this.onCloseFreeOverAnimate.bind(this),this)),this._isLuckBall?this.scheduleOnce(function(){e._freeoverConten.active=!0,e._freeoverConten.getChildByName("freeCloseBtn").active=!1,e._freeCloseLucky.active=!0;var t=2;_.default.getRequestBigRewardStatue()?e._freeCloseLucky.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string="":(e._freeCloseLucky.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string=t+"",e.schedule(function(){t>0?(t--,e._freeCloseLucky.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string=t+""):e.onCloseFreeOverAnimate()},1,e._countdown))},.2):(this._freeoverConten.getChildByName("freeCloseBtn").active=!0,this._freeCloseLucky.active=!1,this.scheduleOnce(function(){if(e._freeoverConten.active=!0,!_.default.getRequestBigRewardStatue()){var t=e._countdown;e._freeCloseTimeLabel.string=t+"",e.schedule(function(){t>0?(t--,e._freeCloseTimeLabel.string=t+""):e.onCloseFreeOverAnimate()},1,e._countdown)}},.2))},t.prototype.onCloseWin=function(e){var t=this;cc.audioEngine.stopEffect(this._effectAudioId),A.default.playEffectByClip(this.btnTouchClip),this.unscheduleAllCallbacks();var i=this["_"+this._currWinNodeName].getChildByName("node");A.default.playEffectByClip(this.collectClip),i.__show=!0,v.default.closeDialogAnimate(i,function(){var o;if(t._isPlayAnimate=!1,t["_"+t._currWinNodeName+"LuckyBall"]&&(t["_"+t._currWinNodeName+"LuckyBall"].active=!1),t["_"+t._currWinNodeName].active=t["_"+t._currWinNodeName+"winConten"].active=t["_"+t._currWinNodeName+"WinCloseBtn"].active=!1,null===(o=t["_"+t._currWinNodeName+"particle"])||void 0===o||o.stopSystem(),i.scale=1,t._winType>3){if(t._winType=0,2==t._resultData.win_type)return void t.createAnimateNode("bigWinNode",t.bigWinPrefab);if(3==t._resultData.win_type)return void t.createAnimateNode("megaWinNode",t.megaWinPrefab)}1!=e&&t.judgeFinish()})},t.prototype.onCloseFreeAnimate=function(){var e=this;cc.audioEngine.stopEffect(this._effectAudioId),A.default.playEffectByClip(this.btnTouchClip),this.unscheduleAllCallbacks();var t=this._freeSpinNode.getChildByName("node");this._jackPotNode2.active=!0,this._jackPotNode1.active=!1,t.__show=!0,this.startFreeSpin(),v.default.closeDialogAnimate(t,function(){e._freeSpinNode.active=e._freeConten.active=e._isPlayAnimate=!1,e._freenumlabel.label.string=e._freeCount+"",t.scale=1})},t.prototype.onCloseFreeOverAnimate=function(){var e=this;A.default.playEffectByClip(this.collectClip),this.unscheduleAllCallbacks();var t=this._freeOverNode.getChildByName("node");this._jackPotNode2.active=!1,this._jackPotNode1.active=!0,this.resetFreeJackpot(),this.startAutoSpin(),t.__show=!0,v.default.closeDialogAnimate(t,function(){cc.audioEngine.stopEffect(e._effectAudioId),e._freeOverNode.active=e._freeoverConten.active=e._isPlayAnimate=!1,e._freeSpinMask.active=e._freeBtn.active=e._freeNode.active=!1,t.scale=1,e._autoBtn.button.interactable=!0,A.default.playMusicByClip(e.bmgClip)})},t.prototype.getJackPotData=function(e){for(var t=this._jackData.length-1;t>=0;t--)if(this._jackData[t].pool_id==e)return this._jackData[t];return null},a([L(cc.AudioClip)],t.prototype,"collectClip",void 0),a([L(cc.AudioClip)],t.prototype,"luckyballClip",void 0),a([L(cc.AudioClip)],t.prototype,"winClip",void 0),a([L(cc.AudioClip)],t.prototype,"bigWinNodeClip",void 0),a([L(cc.AudioClip)],t.prototype,"megaWinNodeClip",void 0),a([L(cc.AudioClip)],t.prototype,"miniWinNodeClip",void 0),a([L(cc.AudioClip)],t.prototype,"minorWinNodeClip",void 0),a([L(cc.AudioClip)],t.prototype,"majorWinNodeClip",void 0),a([L(cc.AudioClip)],t.prototype,"grandWinNodeClip",void 0),a([L(cc.AudioClip)],t.prototype,"scatterClip",void 0),a([L(cc.AudioClip)],t.prototype,"normalwinClip",void 0),a([L(cc.AudioClip)],t.prototype,"freeSpinBmg",void 0),a([L(cc.AudioClip)],t.prototype,"endfreeSpin",void 0),a([L(cc.AudioClip)],t.prototype,"leijiClip",void 0),a([L(cc.AudioClip)],t.prototype,"betAddClip",void 0),a([L(cc.AudioClip)],t.prototype,"betSubClip",void 0),a([L(cc.AudioClip)],t.prototype,"betMaxClip",void 0),a([L(cc.AudioClip)],t.prototype,"openPool",void 0),a([L(cc.AudioClip)],t.prototype,"freespinFinishClip",void 0),a([L(cc.AudioClip)],t.prototype,"progressBarClip",void 0),a([L(cc.AudioClip)],t.prototype,"cupClip",void 0),a([L(cc.AudioClip)],t.prototype,"bigwin_sound_wClip",void 0),a([L(cc.AudioClip)],t.prototype,"megawin_sound_mClip",void 0),a([L(cc.Prefab)],t.prototype,"winPrefab",void 0),a([L(cc.Prefab)],t.prototype,"bigWinPrefab",void 0),a([L(cc.Prefab)],t.prototype,"megaWinPrefab",void 0),a([L(cc.Prefab)],t.prototype,"grandWinPrefab",void 0),a([L(cc.Prefab)],t.prototype,"majorWinPrefab",void 0),a([L(cc.Prefab)],t.prototype,"minorWinPrefab",void 0),a([L(cc.Prefab)],t.prototype,"miniWinPrefab",void 0),a([L(cc.Prefab)],t.prototype,"freeSpinPrefab",void 0),a([L(cc.Prefab)],t.prototype,"freeOverPrefab",void 0),a([P],t)}(l.default);i.default=T,cc._RF.pop()},{"../../Script/BaseSlot/SlotBaseScene":void 0,"../../Script/BaseSlot/SlotGameCfg":void 0,"../../Script/Core/Analytics/AnalyticsCfg":void 0,"../../Script/Core/Analytics/AnalyticsMgr":void 0,"../../Script/Core/Common/NotifyManage":void 0,"../../Script/Core/Common/TipsPopup":void 0,"../../Script/Core/Config/LanguageCfg":void 0,"../../Script/Core/Module/GameData":void 0,"../../Script/Core/Net/HttpMgr":void 0,"../../Script/Core/Net/SlotNetWorkReq":void 0,"../../Script/Core/Net/SocketMgr":void 0,"../../Script/Core/Popup/PopupCfg":void 0,"../../Script/Core/Popup/PopupMgr":void 0,"../../Script/Core/Scene/SceneMgr":void 0,"../../Script/Core/Tool/CommonFun":void 0,"../../Script/Core/Tool/CommonTool":void 0,"../../Script/Core/Tool/GetComByName":void 0,"../../Script/Core/Tool/MathTool":void 0,"../../Script/Core/Tool/ObjPool":void 0,"../../Script/Core/Tool/SoundMgr":void 0,"../../Script/app/data":void 0}]},{},["CricketSlotContentCom","CricketSlotItemCom","CricketSlotRowCom","CricketSlotScene"]);