window.__require=function e(t,i,o){function n(l,s){if(!i[l]){if(!t[l]){var r=l.split("/");if(r=r[r.length-1],!t[r]){var c="function"==typeof __require&&__require;if(!s&&c)return c(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+l+"'")}l=r}var u=i[l]={exports:{}};t[l][0].call(u.exports,function(e){return n(t[l][1][e]||e)},u,u.exports,e,t,i,o)}return i[l].exports}for(var a="function"==typeof __require&&__require,l=0;l<o.length;l++)n(o[l]);return n}({GaneshSlotContentCom:[function(e,t,i){"use strict";cc._RF.push(t,"197a3TgLqlHR5IIxmKjwxZf","GaneshSlotContentCom");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(a<3?n(l):a>3?n(t,i,l):n(t,i))||l);return a>3&&l&&Object.defineProperty(t,i,l),l};Object.defineProperty(i,"__esModule",{value:!0});var l=e("../../Script/BaseSlot/RollState"),s=e("../../Script/BaseSlot/SlotBaseContentCom"),r=e("../../Script/BaseSlot/SlotEvent"),c=e("../../Script/BaseSlot/SlotTool"),u=e("../../Script/Core/Analytics/AnalyticsCfg"),h=e("../../Script/Core/Analytics/AnalyticsMgr"),_=e("../../Script/Core/Event/GlobalEvent"),d=e("../../Script/Core/Module/GameData"),f=e("../../Script/Core/Net/SlotNetWorkReq"),p=e("../../Script/Core/Net/SocketMgr"),m=e("../../Script/Core/Tool/CommonFun"),b=e("../../Script/Core/Tool/MathTool"),N=e("../../Script/Core/Tool/ObjPool"),C=e("../../Script/Core/Tool/SoundMgr"),v=e("../../Script/app/data"),g=e("./GaneshSlotRowCom"),y=cc._decorator,S=y.ccclass,A=y.property,B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.row=null,t.elemtScroll=null,t.elemtScrollend=null,t.awaitClip=null,t._itemRows=[],t._luckyPos=[],t._completeCount=0,t._betValue=0,t._spinBtn=null,t._stopBtn=null,t._scrollAudioId=-1,t._levelId=0,t._freeScreenNum=1,t._freeMode=1,t._screenResult=null,t._rightsX=[-313,-157.3,-.4,151.2,305.8],t._effectScrollAudioId=-1,t._freeNodePos=[cc.v2(-225,137),cc.v2(244,137),cc.v2(-225,-134),cc.v2(244,-134)],t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._freeNode.active=!0,_.GlobalEvent.on(r.default.RollState_Complete,this.onRollComplete,this),_.GlobalEvent.on(r.default.UpdateBetValue,this.onUpdateBetValue,this),_.GlobalEvent.on(r.default.Click_Spin,this.onSpin,this),_.GlobalEvent.on(r.default.Click_Stop,this.onStop,this),_.GlobalEvent.on(r.default.UpdateSlotData,this.initRowItem,this),_.GlobalEvent.on(r.default.Click_SpinTest,this.onSpinTest,this),p.default.init(this,["SpinSlotRsp"],["SpinSlotRsp"]),N.default.SetObj(this.row,"GaneshRowItem")},t.prototype.start=function(){this._levelId=d.default.getSlotGameData().level.level_id,this._betValue=Number(d.default.getSlotGameData().prev_base)?Number(d.default.getSlotGameData().prev_base):Number(d.default.getSlotGameData().level.bets[0]),this.initRowItem()},t.prototype.setUI=function(e,t){this._spinBtn=e,this._stopBtn=t},t.prototype.setScreenNum=function(e,t){this._freeScreenNum=e,this._freeMode=t},t.prototype.initRowItem=function(){var e=c.default.ConverSlotTables(d.default.getSlotGameData().tables);e=e.elementIndexs,this._itemRows.length=0,this._content.destroyAllChildren();for(var t=0;t<5;t++){var i=cc.instantiate(this.row);i.name=t+"",i.parent=this._content,i.x=157.5*t-320;var o=i.getComponent(g.default);this._itemRows.push(o),o.g_init(e[t],t,d.default.getSlotGameData().sequence[t],0)}this._rollingStatus=l.default.Status_NoAction,this.initSmallRowItem()},t.prototype.initSmallRowItem=function(){this._freeNode.y=2e4;for(var e=0;e<4;e++){this["_content"+e].removeAllChildren(),this["_key_img"+e].active=!1;var t=this._resultInfo?this._resultInfo.tables:d.default.getSlotGameData().tables,i=c.default.ConverSlotTables(t);i=i.elementIndexs;for(var o=0;o<5;o++){var n=N.default.GetObj("GaneshRowItem");n.name=o+"",n.parent=this["_content"+e],n.x=152.5*o-305;var a=n.getComponent(g.default);this._itemRows.push(a);var l=5*(e+1)+o;a.g_init(i[o],l,null,e+1)}}},t.prototype.onSpin=function(e){if(this._rollingStatus==l.default.Status_NoAction){this._scrollAudioId=C.default.playEffectByClip(this.elemtScroll),f.SlotNetWorkReq.SpinSlotReq(d.default.getSlotThemeid(),v.snData.game.levelId,e||this._betValue,!!e,this._freeMode),this._spinBtn.interactable=!1,this._rollingStatus=l.default.Status_RollAction;for(var t=0;!this._freeNode.is_show&&t<5;t++)_.GlobalEvent.emit(r.default.RollState_Start,t);for(t=0;this._freeNode.is_show&&t<4;t++)for(var i=0;i<5;i++){var o=5*(t+1)+i;_.GlobalEvent.emit(r.default.RollState_Start,o)}e||(h.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_GOGOFRUITS_SPIN),h.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_SPIN),h.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_BET_PRICE,"","af_price",parseFloat(b.default.divide(this._betValue,1e4))))}},t.prototype.onStop=function(){if(this._rollingStatus==l.default.Status_StartAction){this._rollingStatus=l.default.Status_RollAction,this._stopBtn.interactable=!1;for(var e=0;e<5;e++)0==this._itemRows[e].startStop&&(cc.Tween.stopAllByTarget(this._itemRows[e].node),_.GlobalEvent.emit(r.default.RollState_Stop,e))}},t.prototype.showFreeNode=function(){var e=this;cc.tween(this._mainNode).to(.15,{scale:.56}).delay(.1).call(function(){e._freeNode.is_show=!0,e._mainNode.y=5e3,e._freeNode.y=0;for(var t=0;t<4;t++){if(e["_smallNode"+t].position=cc.v2(0,0),t<e._freeScreenNum){e["_key_img"+t].active=!1;var i=e._resultInfo?e._resultInfo.tables:d.default.getSlotGameData().tables,o=c.default.ConverSlotTables(i);o=o.elementIndexs;for(var n=0;n<5;n++){var a=5*(t+1)+n,l=e._itemRows[a].node;l.name=n+"",l.y=0,l.x=152.5*n-305,e._itemRows[a].g_init(o[n],a,null,t+1)}}else e["_key_img"+t].active=!0;cc.tween(e["_smallNode"+t]).to(.15,{position:e._freeNodePos[t]}).start()}}).start()},t.prototype.hideFreeNode=function(){for(var e=this,t=0,i=function(i){cc.tween(o["_smallNode"+i]).to(.15,{position:cc.v2(0,0)}).call(function(){4==++t&&(e._freeNode.is_show=!1,e._mainNode.y=0,e["_smallNode"+i].y=2e4,cc.tween(e._mainNode).to(.15,{scale:1}).start())}).start()},o=this,n=0;n<4;n++)i(n)},t.prototype.SpinSlotRsp=function(e){var t=this;if(this._completeCount=0,0==e.result.err_code){h.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_START_GAME),h.default.sendH5Event(u.AnalyticsH5Event.Start_game),this._resultInfo=e,this._screenResult=e.results;var i=0,o=0;if(this._freeNode.is_show)for(var n=0;n<this._freeScreenNum;n++)for(var a=c.default.ConverSlotTables(e.results[n].tables),s=a.elementIndexs,d=a.serverIndexs,f=0;f<5;f++){var p=5*(n+1)+f;_.GlobalEvent.emit(r.default.GetServerData,p,s[f].slice(),d[f].slice())}var b=c.default.ConverSlotTables(e.tables),N=b.elementIndexs,v=b.serverIndexs;for(f=0;f<5;f++)_.GlobalEvent.emit(r.default.GetServerData,f,N[f],v[f]);if(e.is_free)this.scheduleOnce(function(){for(var e=0;e<5;e++)_.GlobalEvent.emit(r.default.RollState_Stop,e);for(e=0;e<t._freeScreenNum;e++)for(var i=0;i<5;i++){var o=5*(e+1)+i;_.GlobalEvent.emit(r.default.RollState_Stop,o)}},.7);else{var g=function(e){for(var n=0,a=function(a){var l=5*(a+1)+e,s=e;o=5*(a+1),cc.tween(t._itemRows[l].node).delay(t._itemRows[l].delayTime).call(function(){_.GlobalEvent.emit(r.default.RollState_Stop,l),n++,++s<5&&n==t._freeScreenNum&&++i<5&&g(i)}).start()},l=0;l<t._freeScreenNum;l++)a(l)},y=function(e){cc.tween(t._itemRows[e].node).delay(t._itemRows[e].delayTime).call(function(){var i=0;_.GlobalEvent.emit(r.default.RollState_Stop,e);for(var n=o;n<=e;n++)i+=t._itemRows[n].scatterNum;++e<5&&(i>=2&&(t._waitFreespinRight.active=!0,t._waitFreespinRight.x=t._rightsX[e],t._itemRows[e].delayTime+=1,t._itemRows[e].speed=t._itemRows[e].speed,cc.audioEngine.stopEffect(t._effectScrollAudioId),t._effectScrollAudioId=C.default.playEffectByClip(t.awaitClip)),y(e))}).start()};this._freeNode.is_show&&g(i),y(i)}this.scheduleOnce(function(){t._rollingStatus=l.default.Status_StartAction,t._spinBtn.interactable=!1,t._stopBtn.node.active=t._stopBtn.interactable=!0,t.checkfirstStop()},.5)}else m.default.setTip(e.result.err_desc),this.scheduleOnce(function(){for(var e=0;e<5;e++)_.GlobalEvent.emit(r.default.RollState_Stop,e);for(e=0;e<t._freeScreenNum;e++)for(var i=0;i<5;i++){var o=5*(e+1)+i;_.GlobalEvent.emit(r.default.RollState_Stop,o)}},.7)},t.prototype.onRollComplete=function(){var e=this;this._completeCount++;var t=this._freeNode.is_show?5*this._freeScreenNum:5;if(C.default.playEffectByClip(this.elemtScrollend),this._completeCount==t){cc.audioEngine.stopEffect(this._effectScrollAudioId),this._waitFreespinRight.active=!1,this._luckyPos.length=0;for(var i=[],o=0;o<4;o++)i[o]=[];if(this._resultInfo){if(this._resultInfo.win_line.length>0)for(var n=0;n<this._resultInfo.win_line.length;n++){var a=this._resultInfo.win_line[n].lucky_pos;for(o=0;o<a.length;o++)-1==this._luckyPos.indexOf(a[o])&&this._luckyPos.push(a[o])}if((c=this._resultInfo.win_free.lucky_pos).length>0)for(o=0;o<c.length;o++)-1==this._luckyPos.indexOf(c[o])&&this._luckyPos.push(c[o])}for(var s=0;s<4&&this._screenResult;s++)if(this._screenResult[s]){for(n=0;n<this._screenResult[s].win_line.length;n++)for(a=this._screenResult[s].win_line[n].lucky_pos,o=0;o<a.length;o++)-1==i[s].indexOf(a[o])&&i[s].push(a[o]);var c;if((c=this._screenResult[s].win_free.lucky_pos).length>0)for(o=0;o<c.length;o++)-1==i[s].indexOf(c[o])&&i[s].push(c[o])}cc.tween(this.node).delay(.2).call(function(){cc.audioEngine.stopEffect(e._scrollAudioId);for(var t=e._luckyPos.length-1;t>=0;t--)_.GlobalEvent.emit(r.default.PlayLuckyElementAnimate,e._luckyPos[t],0);for(t=0;t<4;t++)for(var o=0;o<i[t].length;o++)_.GlobalEvent.emit(r.default.PlayLuckyElementAnimate,i[t][o],t+1)}).delay(.2).call(function(){e._spinBtn.node.active=e._spinBtn.interactable=!0,e._stopBtn.node.active=!1,e._resultInfo&&_.GlobalEvent.emit(r.default.OpenWinAward),e._rollingStatus=l.default.Status_NoAction}).start()}},t.prototype.onUpdateBetValue=function(e){this._betValue=e},t.prototype.onSpinTest=function(e,t){if(this._rollingStatus==l.default.Status_NoAction){this._rollingStatus=l.default.Status_RollAction,this._spinBtn.interactable=!1,f.SlotNetWorkReq.SlotsFakeReq(d.default.getSlotThemeid(),e||this._betValue,t);for(var i=0;!this._freeNode.is_show&&i<5;i++)_.GlobalEvent.emit(r.default.RollState_Start,i);for(i=0;this._freeNode.is_show&&i<4;i++)for(var o=0;o<5;o++){var n=5*(i+1)+o;_.GlobalEvent.emit(r.default.RollState_Start,n)}this._scrollAudioId=C.default.playEffectByClip(this.elemtScroll),e||(h.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_GOGOFRUITS_SPIN),h.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_SPIN),h.default.sendAFEvent(u.AnalyticsAFCfg.EVENT_AF_BET_PRICE,"","af_price",parseFloat(b.default.divide(this._betValue,1e4))))}},t.prototype.onDestroy=function(){this._spinBtn=this._stopBtn=null,cc.audioEngine.stopEffect(this._scrollAudioId),e.prototype.onDestroy.call(this)},a([A(cc.Prefab)],t.prototype,"row",void 0),a([A(cc.AudioClip)],t.prototype,"elemtScroll",void 0),a([A(cc.AudioClip)],t.prototype,"elemtScrollend",void 0),a([A(cc.AudioClip)],t.prototype,"awaitClip",void 0),a([S],t)}(s.SlotBaseContentCom);i.default=B,cc._RF.pop()},{"../../Script/BaseSlot/RollState":void 0,"../../Script/BaseSlot/SlotBaseContentCom":void 0,"../../Script/BaseSlot/SlotEvent":void 0,"../../Script/BaseSlot/SlotTool":void 0,"../../Script/Core/Analytics/AnalyticsCfg":void 0,"../../Script/Core/Analytics/AnalyticsMgr":void 0,"../../Script/Core/Event/GlobalEvent":void 0,"../../Script/Core/Module/GameData":void 0,"../../Script/Core/Net/SlotNetWorkReq":void 0,"../../Script/Core/Net/SocketMgr":void 0,"../../Script/Core/Tool/CommonFun":void 0,"../../Script/Core/Tool/MathTool":void 0,"../../Script/Core/Tool/ObjPool":void 0,"../../Script/Core/Tool/SoundMgr":void 0,"../../Script/app/data":void 0,"./GaneshSlotRowCom":"GaneshSlotRowCom"}],GaneshSlotItemCom:[function(e,t,i){"use strict";cc._RF.push(t,"eb9a9NCAbVLCpEzaAsSdopV","GaneshSlotItemCom");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(a<3?n(l):a>3?n(t,i,l):n(t,i))||l);return a>3&&l&&Object.defineProperty(t,i,l),l};Object.defineProperty(i,"__esModule",{value:!0});var l=cc._decorator,s=l.ccclass,r=l.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.elementAnimate=[],t.elementNode=[],t.elementDragoneAnim=[],t.rightAnimate=null,t._currId=-1,t._itemNodes=[],t._itemAnimates=[],t}return n(t,e),t.prototype.init=function(){for(var e=0;e<9;e++)this._itemNodes[e]=this.elementNode[e].getChildByName("item"),this._itemAnimates[e]=this.elementDragoneAnim[e]?this.elementDragoneAnim[e]:this.elementAnimate[e];for(e=9;e<13;e++){this._itemNodes[e]=this.elementNode[9].getChildByName("item"),this._itemAnimates[e]=this.elementDragoneAnim[9]?this.elementDragoneAnim[9]:this.elementAnimate[9];for(var t=0;t<4;t++)this._itemNodes[e]["x"+t]=this._itemNodes[e].getChildByName("x"+(t+1)),this._itemAnimates[e]["x"+t]=this.elementNode[9].getChildByName("x"+(t+1))}this._itemNodes[13]=this.elementNode[10].getChildByName("item"),this._itemAnimates[13]=this.elementDragoneAnim[10]?this.elementDragoneAnim[10]:this.elementAnimate[10]},t.prototype.reset=function(){if(this.rightAnimate.node.active=!1,-1!=this._currId&&(this.bHasAnimation(this._itemAnimates[this._currId])&&(this._itemAnimates[this._currId].setCurrentTime(0),this._itemAnimates[this._currId].stop()),this._itemAnimates[this._currId].node.active=!1,this._itemNodes[this._currId].active=!0,this._currId>=9&&this._currId<13)){var e=this._currId-9;this._itemNodes[this._currId]["x"+e].active=!0,this._itemAnimates[this._currId]["x"+e].active=!1}},t.prototype.setCurrNode=function(e){if(-1!=this._currId&&(this._itemNodes[this._currId].parent.active=!1),this._itemNodes[e].parent.active=!0,this._itemNodes[e].active=!0,this.bHasAnimation(this._itemAnimates[e])&&this._itemAnimates[e].stop(),this._currId=e,e>=9&&e<13){for(var t=0;t<4;t++)this._itemNodes[e]["x"+t].active=!1,this._itemAnimates[e]["x"+t].active=!1;var i=e-9;this._itemNodes[e]["x"+i].active=!0}},t.prototype.playAnimate=function(){if(-1!=this._currId&&(this._itemNodes[this._currId].active=!1,this._itemAnimates[this._currId].node.active=!0,this.bHasAnimation(this._itemAnimates[this._currId])?this._itemAnimates[this._currId].play():this._itemAnimates[this._currId].playAnimation("newAnimation",0),this._currId>=9&&this._currId<13)){var e=this._currId-9;this._itemNodes[this._currId]["x"+e].active=!1,this._itemAnimates[this._currId]["x"+e].active=!0}this.rightAnimate.node.active=!0,this.rightAnimate.playAnimation("newAnimation",0)},t.prototype.bHasAnimation=function(e){return!!e.getComponent(cc.Animation)},a([r(cc.Animation)],t.prototype,"elementAnimate",void 0),a([r(cc.Node)],t.prototype,"elementNode",void 0),a([r(dragonBones.ArmatureDisplay)],t.prototype,"elementDragoneAnim",void 0),a([r(dragonBones.ArmatureDisplay)],t.prototype,"rightAnimate",void 0),a([s],t)}(cc.Component);i.default=c,cc._RF.pop()},{}],GaneshSlotRowCom:[function(e,t,i){"use strict";cc._RF.push(t,"85058fRBoBG6qPT5K2wJM2C","GaneshSlotRowCom");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(a<3?n(l):a>3?n(t,i,l):n(t,i))||l);return a>3&&l&&Object.defineProperty(t,i,l),l};Object.defineProperty(i,"__esModule",{value:!0});var l=e("../../Script/BaseSlot/RollState"),s=e("../../Script/BaseSlot/SlotRowBase"),r=e("../../Script/Core/Tool/CommonTool"),c=e("./GaneshSlotItemCom"),u=cc._decorator,h=u.ccclass,_=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._winAnimateNode=null,t._screenId=0,t}return n(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this._spaceY=155,this._startY=-320,this._speed=570,this._scatterId=14},t.prototype.g_init=function(e,t,i,o){e.push(1),e.unshift(Math.floor(Math.random()*this._elementCount)+1),this.node.y=0;for(var n=[],a=[],s=0;s<this._itemCount;s++){var u=void 0;this._itemList[s]?(u=this._itemList[s],n.unshift(u),a.push(String(s))):((u=cc.instantiate(this.item)).parent=this.node,this._itemList.unshift(u),this._itemQueueTag.push(String(s))),u.name=s+"",u.y=this._startY+this._spaceY*s,u.itemCom=u.itemCom||u.getComponent(c.default),u.itemCom.init(),u.itemCom.reset(),u.itemCom.setCurrNode(e[s]-1)}this._itemList=0!=n.length?n.slice():this._itemList,this._itemQueueTag=0!=a.length?a.slice():this._itemQueueTag;var h=this._itemList[this._itemList.length-1];this._endReelY=r.default.ConverNodePos(h,this.node.parent).y+18,this._rowId=t,this._screenId=o;var _=this._itemList.length;this._itemList[_-1].y-=200,this._orgDelayTime=.25,this._orgDelayTime=t%5==0?this._orgDelayTime+.4:this._orgDelayTime,this._delayTime=this._orgDelayTime,this.scatterNum=0,this._rollingStatus=l.default.Status_NoAction,i&&(this._elemSequen=i.split(",")),this.resetdata()},t.prototype.updateItemPosition=function(){var e=this._itemQueueTag[0];if(e!==this._stopTag){var t=this.node.getChildByName(String(e));if(t){var i=null;if(r.default.ConverNodePos(t,this.node.parent).y<this._endReelY){this._itemQueueTag.shift(),i=t;var o=this._itemQueueTag[this._itemQueueTag.length-1],n=this.node.getChildByName(String(o));t.y=n.y+this._spaceY,t.zIndex=n.zIndex-1<0?0:n.zIndex-1,this._itemQueueTag.push(String(e))}if(i){var a=this._elemSequen?this.getElemtId():Math.floor(Math.random()*this._elementCount)+1;this.startStop&&(a=this._resultQueue.shift()||a,i.serverpos=this._serverPos.shift(),this._canStartStop||0!=this._resultQueue.length||(this._canStartStop=!0,this._stopTag=parseInt(i.name))),a-=1,i.itemCom.setCurrNode(a)}}this.checkStartStopAction()}},t.prototype.resetdata=function(){this.scatterNum=0,e.prototype.resetdata.call(this);for(var t=this._itemList.length-1;t>=0;t--)this._itemList[t].itemCom.reset()},t.prototype.onPlayLuckElement=function(e,t){if(void 0===t&&(t=0),t==this._screenId)for(var i=this._itemList.length-1;i>=0;i--)this._itemList[i].serverpos==e&&this._itemList[i].itemCom.playAnimate()},t.prototype.getElemtId=function(){var e=this._elemSequen.shift();return this._elemSequen.push(e),e},a([h],t)}(s.default));i.default=_,cc._RF.pop()},{"../../Script/BaseSlot/RollState":void 0,"../../Script/BaseSlot/SlotRowBase":void 0,"../../Script/Core/Tool/CommonTool":void 0,"./GaneshSlotItemCom":"GaneshSlotItemCom"}],GaneshSlotScene:[function(e,t,i){"use strict";cc._RF.push(t,"2ba3f1/InRNYL6+EGhWP6LD","GaneshSlotScene");var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)},function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),a=this&&this.__decorate||function(e,t,i,o){var n,a=arguments.length,l=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,i,o);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(a<3?n(l):a>3?n(t,i,l):n(t,i))||l);return a>3&&l&&Object.defineProperty(t,i,l),l};Object.defineProperty(i,"__esModule",{value:!0});var l=e("../../Script/BaseSlot/SlotBaseScene"),s=e("../../Script/BaseSlot/SlotEvent"),r=e("../../Script/BaseSlot/SlotGameCfg"),c=e("../../Script/Core/Analytics/AnalyticsCfg"),u=e("../../Script/Core/Analytics/AnalyticsMgr"),h=e("../../Script/Core/Common/NotifyManage"),_=e("../../Script/Core/Common/TipsPopup"),d=e("../../Script/Core/Config/GameCfg"),f=e("../../Script/Core/Config/LanguageCfg"),p=e("../../Script/Core/Enum/IntoShopType"),m=e("../../Script/Core/Event/GlobalEvent"),b=e("../../Script/Core/Module/GameData"),N=e("../../Script/Core/Net/AppNetWorkReq"),C=e("../../Script/Core/Net/HttpMgr"),v=e("../../Script/Core/Net/SocketMgr"),g=e("../../Script/Core/Popup/PopupCfg"),y=e("../../Script/Core/Popup/PopupMgr"),S=e("../../Script/Core/Scene/SceneMgr"),A=e("../../Script/Core/Tool/CommonFun"),B=e("../../Script/Core/Tool/CommonTool"),w=e("../../Script/Core/Tool/GetComByName"),G=e("../../Script/Core/Tool/MathTool"),L=e("../../Script/Core/Tool/SoundMgr"),I=cc._decorator,k=I.ccclass,R=I.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.winClip=null,t.bigWinNodeClip=null,t.megaWinNodeClip=null,t.scatterClip=null,t.normalwinClip=null,t.freeSpinBmg=null,t.endfreeSpin=null,t.betAddClip=null,t.betSubClip=null,t.betMaxClip=null,t.freeSpinClip=null,t.bigwin_sound_wClip=null,t.megawin_sound_mClip=null,t.winPrefab=null,t.bigWinPrefab=null,t.megaWinPrefab=null,t.freeSpinPrefab=null,t.freeOverPrefab=null,t.rightNorNode=null,t.rightFourNode=null,t._freeScreenNum=1,t._freeMode=-1,t._effectAudioId=-1,t._isFree=!1,t._lastBetNum=0,t._curBeishuNumSel=1,t}return n(t,e),t.prototype.initEvent=function(){e.prototype.initEvent.call(this),v.default.init(this,["SpinSlotRsp","LeaveSlotThemeRsp","RummyGetPlayerInfoRsp"],["SpinSlotRsp"])},t.prototype.initUiData=function(){var e=this;C.default.sendPostManage({page:"Gogo Fruits",action:"entry"}),this._bets=b.default.getSlotGameData().level.bets,this._myGold=b.default.getUserInfo().all_coin,this._serverGold=this._myGold;for(var t=0;t<this._bets.length;t++)if(Number(this._bets[t])==Number(b.default.getSlotGameData().prev_base)){this._betIndex=t;break}var i=function(){if(b.default.getSlotGameData().free_count>0){e._freeCount=b.default.getSlotGameData().free_count,e._freeBaseBet=Number(b.default.getSlotGameData().free_base);var t={tipsInfo:f.default.Formate("You have X rough free",e._freeCount),yesCallBack:function(){e._slotContentNode.getComponent("GaneshSlotContentCom").showFreeNode(),e.scheduleOnce(function(){e.startFreeSpin()},.3)},isNo:!1,bHelper:!0};_.TipsPopupHelper.show(t);for(var i=0;i<e._bets.length;i++)if(Number(e._bets[i])==e._freeBaseBet){e._betIndex=i;break}}};for(b.default.getSlotGameData().enter_luckyball?y.default.show(g.default.POPUP_TARGE.LuckyBall,{data:{win:0,all:this._myGold+"",bet:this._bets[this._betIndex],closeF:function(t){""!=t&&(e._goldLabel.label.string=t,e._myGold=t),L.default.playMusicByClip(e.bmgClip),i()}}}):i(),this._goldLabel.label.string=this._myGold+"",m.GlobalEvent.emit(s.default.UpdateBetValue,Number(this._bets[this._betIndex])),N.default.RummyGetPlayerInfoReq(),this._slotContentNode.getComponent("GaneshSlotContentCom").setUI(this._spinBtn.button,this._stopBtn.button,this._autoBtn.button),t=0;t<6;t++)this["_smallLineNumLabel"+t].label.string=b.default.getSlotGameData().level.line_sum+"";this._freeMode=b.default.getSlotGameData().free_mode;var o=b.default.getSlotGameData().free_conf;for(o[this._freeMode-1]?this._freeScreenNum=o[this._freeMode-1].screen_sum:this._freeScreenNum=4,t=0;t<3;t++)this["_right"+(t+1)].active=!1,cc.find("button"+(t+1)+"_img/bg",this._freeModeNode).active=!1;for(t=0;t<this._freeMode;t++)this["_right"+(t+1)].active=!0,cc.find("button"+(t+1)+"_img/bg",this._freeModeNode).active=!0,this._curBeishuNumSel=t+1;this._slotContentNode.getComponent("GaneshSlotContentCom").setScreenNum(this._freeScreenNum,this._freeMode),this._jiaBtn.button.interactable=this._maxbetBtn.button.interactable=this._betIndex!=this._bets.length-1,this._jianBtn.button.interactable=0!=this._betIndex,this._betLabel.label.string=this._bets[this._betIndex]/1e4+"",b.default.getNotifySwitch()&&h.default.show(this._topNode,cc.v2(40,5))},t.prototype.onUpdatUI=function(){e.prototype.onUpdatUI.call(this),this._freeNode.y=2e4,this.setRightShow(!1),this._winNumNode.active=this._freeNode.is_show=this._freeSpinMask.active=this._freeBtn.active=this._stopBtn.active=this._autoSgin.active=!1,this._goodluck_img.active=this._spinBtn.active=this._freeModeMask.active=!0,this._spinBtn.button.interactable=this._autoBtn.button.interactable=!0},t.prototype.onSetFreeMode=function(e,t){if(t>1){if(d.GameCfg.limitAddBet&&Number(b.default.getUserInfo().recharge_sum)<200){var i={tipsInfo:"Caros jogadores, o m\xfaltiplo de apostas ser\xe1 desbloqueado passo a passo com o seu valor de recarga, por favor, tente explorar lentamente no jogo!",yesCallBack:function(){A.default.playerRecharge(p.IntoShopType.GameStore,{fromid:p.IntoShopType.GameStore,openfromid:p.IntoShopType.GameStore})},isNo:!1,bHelper:!0};return void _.TipsPopupHelper.show(i)}if(this._freeControl&&!this._freeControl.can_change_bet)return void y.default.show(g.default.POPUP_TARGE.BetRemindRecharge,{data:{nRechargeNum:20,nScheduleSecs:5}})}for(var o=0;o<this._bets.length;o++)if(Number(this._bets[o])==Number(b.default.getSlotGameData().free_conf[parseInt(t)-1].min_bet)){this._betIndex=o,this._betLabel.label.string=this._bets[this._betIndex]/1e4+"";break}for(this._curBeishuNumSel=Number(t),this._jiaBtn.button.interactable=this._maxbetBtn.button.interactable=this._betIndex!=this._bets.length-1,this._jianBtn.button.interactable=0!=this._betIndex,this._freeScreenNum=b.default.getSlotGameData().free_conf[parseInt(t)-1].screen_sum,this._freeMode=parseInt(t),this._slotContentNode.getComponent("GaneshSlotContentCom").setScreenNum(this._freeScreenNum,this._freeMode),m.GlobalEvent.emit(s.default.UpdateBetValue,Number(this._bets[this._betIndex])),o=0;o<3;o++)this["_right"+(o+1)].active=!1,cc.find("button"+(o+1)+"_img/bg",this._freeModeNode).active=!1;for(o=0;o<t;o++)this["_right"+(o+1)].active=!0,cc.find("button"+(o+1)+"_img/bg",this._freeModeNode).active=!0;L.default.playEffectByClip(this.btnTouchClip)},t.prototype.onOpearBetCallBack=function(t){e.prototype.onOpearBetCallBack.call(this,t);var i=b.default.getSlotGameData().free_conf,o=Number(this._bets[this._betIndex]);o>=Number(i[0].min_bet)&&o<Number(i[1].min_bet)?(this._freeMode=1,this._freeScreenNum=i[0].screen_sum):o>=Number(i[1].min_bet)&&o<Number(i[2].min_bet)?(this._freeMode=2,this._freeScreenNum=i[1].screen_sum):(this._freeMode=3,this._freeScreenNum=i[2].screen_sum),this._slotContentNode.getComponent("GaneshSlotContentCom").setScreenNum(this._freeScreenNum,this._freeMode);for(var n=0;n<3;n++)cc.find("button"+(n+1)+"_img/bg",this._freeModeNode).active=!1,this["_right"+(n+1)].active=!1;for(n=0;n<this._freeMode;n++)cc.find("button"+(n+1)+"_img/bg",this._freeModeNode).active=!0,this["_right"+(n+1)].active=!0,this._curBeishuNumSel=n+1;2==t.index?L.default.playEffectByClip(this.betMaxClip):1==t.index?L.default.playEffectByClip(this.betAddClip):L.default.playEffectByClip(this.betSubClip)},t.prototype.onAutoCallBack=function(t){this._autoSgin.active=this._freeModeMask.active=!0,e.prototype.onAutoCallBack.call(this,t)},t.prototype.onCancelAutoCallBack=function(e){e&&L.default.playEffectByClip(this.btnTouchClip),this._autoNum=0,this._spinBtn.active=this._autoBtn.button.interactable=!0,this._autoSgin.active=this._freeModeMask.active=!1,this._autonumlabel.label.string="",this._maxbetBtn.button.interactable=this._jiaBtn.button.interactable=this._betIndex!=this._bets.length-1,this._jianBtn.button.interactable=0!=this._betIndex,this.checkMinBetIndex()},t.prototype.onSpinCallBack=function(){e.prototype.onSpinCallBack.call(this),this._freeModeMask.active=!0},t.prototype.SpinSlotRsp=function(e){if(0==e.result.err_code){this.round++;var t;t=e.is_free?Number(e.win_coins):Number(e.win_coins)-Number(e.bet_coins),this._lastBetNum=Number(e.bet_coins),u.default.sendAFEvent(c.AnalyticsAFCfg.getEventPlayGame(),{round:this.round,goldChange:G.default.divide(t,1e4)}),this._serverGold=e.now_coin,this._resultData=e,this._winGold=e.win_coins,this._isLuckBall=e.show_luckyball,this._isFreeSpin=!1,e.is_free?(this._freeCount>0&&this._freeCount--,e.win_free.free_count?(this._isFreeSpin=!0,this._freeCurrCount=Number(e.win_free.free_count)-this._freeCount,this._freeCount=Number(e.win_free.free_count)):this._freenumlabel.label.string=this._freeCount+"",this._freeTotalWinNum+=Number(e.win_coins)):(this._freeCount=this._freeCurrCount=Number(e.win_free.free_count),this._freeBaseBet=Number(e.win_free.free_base),this._myGold=G.default.sub(this._myGold,G.default.divide(Number(e.bet_coins),1e4)),this._isFreeSpin=!!e.win_free.free_count,this._freeTotalWinNum=0,this._autoNum>0&&(this._autoNum--,this._autonumlabel.label.string=this._autoNum+""),this._winNumLabel.label.string="0"),this._goldLabel.label.string=this._myGold,this._winNumNode.active=this._freeNode.is_show,this._goodluck_img.active=!this._freeNode.is_show}else A.default.setTip(e.result.err_desc)},t.prototype.LeaveSlotThemeRsp=function(){S.default.runScene("HallScene")},t.prototype.onHideAutoNode=function(){this._autoNode.active=!1},t.prototype.onOpenWinAward=function(){var t=this;e.prototype.onOpenWinAward.call(this),this._myGold=this._serverGold;var i=this._resultData.win_type;switch(this._isFree=this._freeNode.is_show,i){case 1:return void this.createWinAnimate();case 2:return L.default.playEffectByClip(this.bigwin_sound_wClip),void this.createAnimateNode("bigWinNode",this.bigWinPrefab);case 3:return L.default.playEffectByClip(this.megawin_sound_mClip),void this.createAnimateNode("megaWinNode",this.megaWinPrefab)}B.default.NumAnimate(this._goldLabel.label,.5,1e4*Number(this._goldLabel.label.string),1e4*Number(this._myGold),1,1,function(){t._goldLabel.label.string=t._myGold}),this.judgeFinish()},t.prototype.judgeFinish=function(){var e=this;if(this._isFreeSpin)return this._isPlayAnimate=!0,L.default.playMusicByClip(this.freeSpinBmg),void this.scheduleOnce(function(){e.playFreeSpinAnimate()},1);if(this._freeCount)this.startFreeSpin(.1);else{if(parseFloat(G.default.divide(Number(this._lastBetNum),1e4))>Number(this._myGold)&&(this.onCancelAutoCallBack(),this._autoBtn.button.interactable=!0),this.requestBrokeData(Number(this._myGold),this._lastBetNum),this._freeBaseBet=void 0,this._freeSpinMask.active)return this._isPlayAnimate=!0,void this.scheduleOnce(function(){e.playFreeOverAnimate()},1);this.setRightShow(!1),this._freeSpinMask.active=this._freeBtn.active=this._freeNode.is_show=!1,this._freeNode.y=2e4,this.startAutoSpin(.1)}},t.prototype.openLuckyBall=function(e){var t=this;e&&L.default.playerEffect("clickbottom");var i;this._autonumlabel.label.string,this._autoNumLeft=this._autoNum,this._autoNum=0,this.startAutoSpin(),i=this._isFree?this._freeTotalWinNum:this._winGold,y.default.show(g.default.POPUP_TARGE.LuckyBall,{data:{win:i,all:this._goldLabel.label.string,bet:this._bets[this._betIndex],closeF:function(e){""!=e&&(t._goldLabel.label.string=e,t._myGold=e),L.default.playMusicByClip(t.bmgClip),t._autoNum=t._autoNumLeft,t.judgeFinish()}}}),null==e||e.index()},t.prototype.winAnimateClose=function(e){var t=this;this.__winNodeAnimateNode.getChildByName("bg").getComponent(cc.BlockInputEvents)||this.__winNodeAnimateNode.getChildByName("bg").addComponent(cc.BlockInputEvents),this.unschedule(this.winAnimateClose);var i=this.__winNodeAnimateNode.getChildByName("node");i.__show=!0,A.default.closeDialogAnimate(i,function(){i.scale=1,t.__winNodeAnimate.setCurrentTime(0),t.__winNodeAnimate.stop(),t._isPlayAnimate=t.__winNodeAnimateNode.active=!1,1!=e&&t.judgeFinish()})},t.prototype.createWinAnimate=function(){var e=this;this._isPlayAnimate=!0,this._winNodeBall&&(this._winNodeBall.active=!1),this.__winNodeAnimateNode=this.__winNodeAnimateNode||cc.instantiate(this.winPrefab),null==this.__winNodeAnimateNode.parent&&(this.__winNodeAnimateNode.parent=this._ContentUpLayer),this.__winLabel=this.__winLabel||w.GetComByName(this.__winNodeAnimateNode,"numLabel",cc.Label),this.__winLabel.string="",this.__winNodeAnimate=this.__winNodeAnimate||w.GetComByName(this.__winNodeAnimateNode,"win",cc.Animation),r.SlotGameCfg.isFirstStop||(this.__winNodeAnimate.play(),this.__winNodeAnimateNode.active=!0),this._effectAudioId=L.default.playEffectByClip(this.normalwinClip),null==this._winNodeBall&&(this._winNodeBall=w.GetNodeByName(this.__winNodeAnimateNode,"luckyBallBtn"),A.default.addClick(this._winNodeBall,this.openLuckyBall,this,this.winAnimateClose.bind(this,!0)),A.default.addClick(this.__winNodeAnimateNode,this.winAnimateClose.bind(this,null),this)),this._winNodeBall.getChildByName("timeLab").getComponent(cc.Label).string=2;var t=this._isLuckBall&&!this._isFree;if(this._winNodeBall.active=t,t){this._winNodeBall.active=!0;var i=2;this._winNodeBall.getChildByName("timeLab").getComponent(cc.Label).string=i;var o=function(){i--,e._winNodeBall.getChildByName("timeLab").getComponent(cc.Label).string=i,i<=0&&e.unschedule(o)};this.schedule(o,1),this.__winNodeAnimateNode.getChildByName("bg").getComponent(cc.BlockInputEvents)||this.__winNodeAnimateNode.getChildByName("bg").addComponent(cc.BlockInputEvents),this.scheduleOnce(function(){e.__winNodeAnimateNode.getChildByName("bg").getComponent(cc.BlockInputEvents)&&e.__winNodeAnimateNode.getChildByName("bg").removeComponent(cc.BlockInputEvents)},1.5)}else this.__winNodeAnimateNode.getChildByName("bg").getComponent(cc.BlockInputEvents)||this.__winNodeAnimateNode.getChildByName("bg").addComponent(cc.BlockInputEvents);this.scheduleOnce(this.winAnimateClose,t?2:1),this.scheduleOnce(function(){e._goodluck_img.active=!1,e._winNumNode.active=!0,e._isPlayAward=!0;var t=1e4*Number(e._winNumLabel.label.string),i=e._winGold;if(B.default.NumAnimate(e._goldLabel.label,.5,1e4*Number(e._goldLabel.label.string),1e4*Number(e._myGold),1,1,function(){e._goldLabel.label.string=e._myGold,e.requestBrokeData(Number(e._myGold),e._lastBetNum),A.default.showMoneyChangeWithDrawPopup(),e.requestBigRewardGiftData()}),B.default.NumAnimate(e._winNumLabel.label,.5,t,Number(i),1,1,function(){e._winNumLabel.label.string=G.default.divide(i,1e4),e._isPlayAward=!1}),B.default.NumAnimate(e.__winLabel,.5,0,Number(e._winGold),1,1),e._freeNode.is_show){e.setRightShow(!0);var o=e._freeNode.is_show?1e4*Number(e._winNumLabel.label.string):0,n=e._freeNode.is_show?e._freeTotalWinNum:e._winGold;B.default.NumAnimate(e._winNumLabel.label,.6,o,Number(n),1,1,function(){e._winNumLabel.label.string=G.default.divide(n,1e4),B.default.NumAnimate(e._goldLabel.label,.5,1e4*Number(e._goldLabel.label.string),1e4*Number(e._myGold),1,1,function(){e._goldLabel.label.string=e._myGold}),e._isPlayAward=!1})}},.3)},t.prototype.setRightShow=function(e){if(void 0===e&&(e=!1),!e)return this.rightNorNode.active=!0,void(this.rightFourNode.active=!1);if(this.rightNorNode.active=!1,1!=this._curBeishuNumSel){this.rightFourNode.active=!0;var t=this.rightFourNode.getChildByName("node3"),i=this.rightFourNode.getChildByName("node4");t.active=2==this._curBeishuNumSel,i.active=3==this._curBeishuNumSel}else this.rightFourNode.active=!1},t.prototype.createAnimateNode=function(e,t){var i=this;this._isPlayAnimate=!0,this["_"+e]=this["_"+e]||cc.instantiate(t),null==this["_"+e].parent&&(this["_"+e].parent=this._ContentUpLayer),this["_"+e+"win"]=this["_"+e+"win"]||w.GetNodeByName(this["_"+e],"win"),this["_"+e+"particle"]=this["_"+e+"particle"]||w.GetComByName(this["_"+e],"particle",cc.ParticleSystem),this["_"+e+"winConten"]=this["_"+e+"winConten"]||w.GetNodeByName(this["_"+e],"winConten"),this["_"+e+"WinLabel"]=this["_"+e+"WinLabel"]||w.GetComByName(this["_"+e+"winConten"],"WinLabel",cc.Label),null==this["_"+e+"WinCloseBtn"]&&(this["_"+e+"WinCloseBtn"]=this["_"+e+"winConten"].getChildByName("WinCloseBtn"),A.default.addClick(this["_"+e+"WinCloseBtn"],this.onCloseWin,this)),this["_"+e+"WinTimeLabel"]=this["_"+e+"WinTimeLabel"]||this["_"+e+"WinCloseBtn"].getChildByName("WinTimeLabel").getComponent(cc.Label),this._currWinNodeName=e,"megaWinNode"!=e&&"bigWinNode"!=e||null==this["_"+e+"LuckyBall"]&&(this["_"+e+"LuckyBall"]=w.GetNodeByName(this["_"+e],"luckyBall"),A.default.addClick(this["_"+e+"LuckyBall"].getChildByName("luckbtn"),this.openLuckyBall,this,this.onCloseWin.bind(this,!0)),A.default.addClick(this["_"+e+"LuckyBall"].getChildByName("closebtn"),this.onCloseWin.bind(this,null),this)),this.scheduleOnce(function(){i.playSpecialAnimate(e,i["_"+e],i["_"+e+"win"],i["_"+e+"winConten"],i["_"+e+"WinLabel"],i["_"+e+"WinCloseBtn"],i["_"+e+"WinTimeLabel"],i["_"+e+"LuckyBall"],!0),i._effectAudioId=L.default.playEffectByClip(i[e+"Clip"])},.8)},t.prototype.startAutoSpin=function(e){var t=this;this._autoNum>0?(this._maxbetBtn.button.interactable=this._jianBtn.button.interactable=this._jiaBtn.button.interactable=!1,this._freeModeMask.active=!0,e=e||.1,this.scheduleOnce(function(){t.onSpinCallBack()},e)):this.onCancelAutoCallBack()},t.prototype.startFreeSpin=function(t){var i=this;e.prototype.startFreeSpin.call(this,t),this._freeCount>0?(this._freeNode.is_show||(cc.Tween.stopAllByTarget(this._winNumLabel.label.node),this._winNumLabel.label.string="0.00"),this.setRightShow(!0),this._freeNode.y=0,this._freeSpinMask.active=this._freeBtn.active=this._freeNode.is_show=this._freeModeMask.active=!0,this._maxbetBtn.button.interactable=this._jianBtn.button.interactable=this._jiaBtn.button.interactable=this._autoBtn.button.interactable=!1,t=t||.1,this.scheduleOnce(function(){i.onSpinCallBack()},t)):this.onCancelAutoCallBack()},t.prototype.playSpecialAnimate=function(e,t,i,o,n,a,l,s,r){var c=this;void 0===r&&(r=!1),t.active=i.active=!0,n.string="",i.getComponent(dragonBones.ArmatureDisplay).playAnimation("newAnimation",1),this["_"+this._currWinNodeName+"particle"].resetSystem();var u="jackpotWinNode"==this._currWinNodeName?this._resultData.win_jackpot.win_coin:this._winGold;s&&(s.active=!1),this.scheduleOnce(function(){o.active=!0,B.default.NumAnimate(n,.4,0,u,1,1,function(){if(n.string=G.default.divide(u,1e4),B.default.NumAnimate(c._goldLabel.label,.5,1e4*Number(c._goldLabel.label.string),1e4*Number(c._myGold),1,1,function(){c._goldLabel.label.string=c._myGold,c.requestBrokeData(Number(c._myGold),c._lastBetNum),A.default.showMoneyChangeWithDrawPopup(),c.requestBigRewardGiftData()}),c._isPlayAward=!1,a.active=!0,("megaWinNode"==e||"bigWinNode"==e)&&!c._isFree)if(c._isLuckBall)if(s.active=!0,a.active=!1,b.default.getRequestBigRewardStatue())s.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string="";else{s.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string=2;var t=2,i=function(){t--,s.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string=t,t<=0&&c.unschedule(i)};c.schedule(i,1)}else s.active=!1,a.active=!0;c._goodluck_img.active=!1,c._winNumNode.active=!0;var o="jackpotWinNode"==c._currWinNodeName?1e4*Number(c._winNumLabel.label.string)+Number(c._resultData.win_jackpot.win_coin):c._freeTotalWinNum,r=c._freeNode.is_show?1e4*Number(c._winNumLabel.label.string):0,h=c._freeNode.is_show?o:u;if(B.default.NumAnimate(c._winNumLabel.label,.3,r,Number(h),1,1,function(){c._winNumLabel.label.string=G.default.divide(h,1e4)}),c._countdown){var _=c._countdown;l.string=_+"",c.schedule(function(){_>0?(_--,l.string=_+""):c.onCloseWin(null)},1,c._countdown)}})},.3)},t.prototype.playFreeSpinAnimate=function(){var e=this;this._effectAudioId=L.default.playEffectByClip(this.scatterClip),this._freeSpinNode=this._freeSpinNode||cc.instantiate(this.freeSpinPrefab),this._freeSpinAni=this._freeSpinAni||w.GetNodeByName(this._freeSpinNode,"freeSpinAni"),this._freeConten=this._freeConten||w.GetNodeByName(this._freeSpinNode,"freeConten"),this._freein_6=this._freein_6||w.GetNodeByName(this._freeSpinAni,"freein_6"),this._getFreeCountLabel=this._getFreeCountLabel||w.GetComByName(this._freeConten,"getFreeCountLabel",cc.Label),this._freeSpinTimeLabel=this._freeSpinTimeLabel||w.GetComByName(this._freeSpinNode,"freeSpinTimeLabel",cc.Label),this._machLabel=this._machLabel||w.GetComByName(this._freeSpinNode,"machLabel",cc.Label),null==this._freeSpinNode.parent&&(this._freeSpinNode.parent=this._ContentUpLayer,A.default.addClick(w.GetNodeByName(this._freeSpinNode,"freeStartBtn"),this.onCloseFreeAnimate,this)),this._freeSpinNode.active=!0,this._freein_6.active=!1,this._getFreeCountLabel.string=this._freeCurrCount+"",this._freenumlabel.label.string=this._freeCount+"",this._freeSpinAni.getComponent(dragonBones.ArmatureDisplay).playAnimation("newAnimation",0),this.scheduleOnce(function(){e._freein_6.active=!0,e._freeConten.active=!0;var t=e._countdown;e._freeSpinTimeLabel.string=t+"",e._machLabel.string=e._freeScreenNum+"",e.schedule(function(){t>0?(t--,e._freeSpinTimeLabel.string=t+""):e.onCloseFreeAnimate()},1,e._countdown)},.2)},t.prototype.playFreeOverAnimate=function(){var e=this;this._freeOverNode=this._freeOverNode||cc.instantiate(this.freeOverPrefab),this._freeoverAni=this._freeoverAni||w.GetNodeByName(this._freeOverNode,"freeoverAni"),this._freeoverConten=this._freeoverConten||w.GetNodeByName(this._freeOverNode,"freeoverConten"),this._freewinLabel=this._freewinLabel||w.GetComByName(this._freeOverNode,"freewinLabel",cc.Label),this._freeCloseTimeLabel=this._freeCloseTimeLabel||w.GetComByName(this._freeOverNode,"freeCloseTimeLabel",cc.Label),null==this._freeOverNode.parent&&(this._freeOverNode.parent=this._ContentUpLayer,A.default.addClick(w.GetNodeByName(this._freeOverNode,"freeCloseBtn"),this.onCloseFreeOverAnimate,this)),this._freeOverNode.active=!0,this._freewinLabel.string=G.default.divide(Number(this._freeTotalWinNum),1e4),this._freeoverAni.getComponent(dragonBones.ArmatureDisplay).playAnimation("newAnimation",0),this._effectAudioId=L.default.playEffectByClip(this.freeSpinClip),null==this._freeCloseLucky&&(this._freeCloseLucky=w.GetNodeByName(this._freeOverNode,"luckyBall"),A.default.addClick(this._freeCloseLucky.getChildByName("luckbtn"),this.openLuckyBall,this,this.onCloseFreeOverAnimate.bind(this)),A.default.addClick(this._freeCloseLucky.getChildByName("closebtn"),this.onCloseFreeOverAnimate.bind(this),this)),this._isLuckBall?this.scheduleOnce(function(){e._freeoverConten.active=!0,e._freeoverConten.getChildByName("freeCloseBtn").active=!1,e._freeCloseLucky.active=!0;var t=2;b.default.getRequestBigRewardStatue()?e._freeCloseLucky.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string="":(e._freeCloseLucky.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string=t+"",e.schedule(function(){t>0?(t--,e._freeCloseLucky.getChildByName("luckbtn").getChildByName("timeLab").getComponent(cc.Label).string=t+""):e.onCloseFreeOverAnimate()},1,e._countdown))},.3):(this._freeoverConten.getChildByName("freeCloseBtn").active=!0,this._freeCloseLucky.active=!1,this.scheduleOnce(function(){if(e._freeoverConten.active=!0,!b.default.getRequestBigRewardStatue()){var t=e._countdown;e._freeCloseTimeLabel.string=t+"",e.schedule(function(){t>0?(t--,e._freeCloseTimeLabel.string=t+""):e.onCloseFreeOverAnimate()},1,e._countdown)}},.3)),this.scheduleOnce(function(){},.3)},t.prototype.onCloseWin=function(e){var t=this;L.default.playEffectByClip(this.btnTouchClip),this.unscheduleAllCallbacks();var i=this["_"+this._currWinNodeName].getChildByName("node");i.__show=!0,A.default.closeDialogAnimate(i,function(){cc.audioEngine.stopEffect(t._effectAudioId),t._isPlayAnimate=!1,t["_"+t._currWinNodeName+"LuckyBall"]&&(t["_"+t._currWinNodeName+"LuckyBall"].active=!1),t["_"+t._currWinNodeName].active=t["_"+t._currWinNodeName+"winConten"].active=t["_"+t._currWinNodeName+"WinCloseBtn"].active=!1,t["_"+t._currWinNodeName+"particle"].stopSystem(),i.scale=1,"jackpotWinNode"==t._currWinNodeName&&(2==t._resultData.win_type||t._resultData.win_type),1!=e&&t.judgeFinish()})},t.prototype.onCloseFreeAnimate=function(){var e=this;cc.audioEngine.stopEffect(this._effectAudioId),this.unscheduleAllCallbacks();var t=this._freeSpinNode.getChildByName("node");t.__show=!0,A.default.closeDialogAnimate(t,function(){e._freeSpinNode.active=e._freeConten.active=e._isPlayAnimate=!1,e._freenumlabel.label.string=e._freeCount+"",t.scale=1}),this._slotContentNode.getComponent("GaneshSlotContentCom").showFreeNode(),this.scheduleOnce(function(){e.startFreeSpin()},.5)},t.prototype.onCloseFreeOverAnimate=function(){var e=this;L.default.playEffectByClip(this.btnTouchClip),cc.audioEngine.stopEffect(this._effectAudioId),this.unscheduleAllCallbacks();var t=this._freeOverNode.getChildByName("node");this._slotContentNode.getComponent("GaneshSlotContentCom").hideFreeNode(),t.__show=!0,A.default.closeDialogAnimate(t,function(){e._freeOverNode.active=e._freeoverConten.active=e._isPlayAnimate=!1,e.setRightShow(!1),e._freeSpinMask.active=e._freeBtn.active=e._freeNode.is_show=!1,e._freeNode.y=2e4,t.scale=1,e._autoBtn.button.interactable=!0,L.default.playMusicByClip(e.bmgClip)}),this.scheduleOnce(function(){e.startAutoSpin()},.3)},a([R(cc.AudioClip)],t.prototype,"winClip",void 0),a([R(cc.AudioClip)],t.prototype,"bigWinNodeClip",void 0),a([R(cc.AudioClip)],t.prototype,"megaWinNodeClip",void 0),a([R(cc.AudioClip)],t.prototype,"scatterClip",void 0),a([R(cc.AudioClip)],t.prototype,"normalwinClip",void 0),a([R(cc.AudioClip)],t.prototype,"freeSpinBmg",void 0),a([R(cc.AudioClip)],t.prototype,"endfreeSpin",void 0),a([R(cc.AudioClip)],t.prototype,"betAddClip",void 0),a([R(cc.AudioClip)],t.prototype,"betSubClip",void 0),a([R(cc.AudioClip)],t.prototype,"betMaxClip",void 0),a([R(cc.AudioClip)],t.prototype,"freeSpinClip",void 0),a([R(cc.AudioClip)],t.prototype,"bigwin_sound_wClip",void 0),a([R(cc.AudioClip)],t.prototype,"megawin_sound_mClip",void 0),a([R(cc.Prefab)],t.prototype,"winPrefab",void 0),a([R(cc.Prefab)],t.prototype,"bigWinPrefab",void 0),a([R(cc.Prefab)],t.prototype,"megaWinPrefab",void 0),a([R(cc.Prefab)],t.prototype,"freeSpinPrefab",void 0),a([R(cc.Prefab)],t.prototype,"freeOverPrefab",void 0),a([R(cc.Node)],t.prototype,"rightNorNode",void 0),a([R(cc.Node)],t.prototype,"rightFourNode",void 0),a([k],t)}(l.default);i.default=E,cc._RF.pop()},{"../../Script/BaseSlot/SlotBaseScene":void 0,"../../Script/BaseSlot/SlotEvent":void 0,"../../Script/BaseSlot/SlotGameCfg":void 0,"../../Script/Core/Analytics/AnalyticsCfg":void 0,"../../Script/Core/Analytics/AnalyticsMgr":void 0,"../../Script/Core/Common/NotifyManage":void 0,"../../Script/Core/Common/TipsPopup":void 0,"../../Script/Core/Config/GameCfg":void 0,"../../Script/Core/Config/LanguageCfg":void 0,"../../Script/Core/Enum/IntoShopType":void 0,"../../Script/Core/Event/GlobalEvent":void 0,"../../Script/Core/Module/GameData":void 0,"../../Script/Core/Net/AppNetWorkReq":void 0,"../../Script/Core/Net/HttpMgr":void 0,"../../Script/Core/Net/SocketMgr":void 0,"../../Script/Core/Popup/PopupCfg":void 0,"../../Script/Core/Popup/PopupMgr":void 0,"../../Script/Core/Scene/SceneMgr":void 0,"../../Script/Core/Tool/CommonFun":void 0,"../../Script/Core/Tool/CommonTool":void 0,"../../Script/Core/Tool/GetComByName":void 0,"../../Script/Core/Tool/MathTool":void 0,"../../Script/Core/Tool/SoundMgr":void 0}]},{},["GaneshSlotContentCom","GaneshSlotItemCom","GaneshSlotRowCom","GaneshSlotScene"]);